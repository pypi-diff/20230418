# Comparing `tmp/sparsezoo_nightly-1.5.0.20230412-py3-none-any.whl.zip` & `tmp/sparsezoo_nightly-1.5.0.20230418-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,68 +1,69 @@
-Zip file size: 129959 bytes, number of entries: 66
--rw-rw-r--  2.0 unx     1002 b- defN 23-Apr-12 00:30 sparsezoo/__init__.py
--rw-rw-r--  2.0 unx     4728 b- defN 23-Apr-12 00:30 sparsezoo/analytics.py
--rw-rw-r--  2.0 unx     4090 b- defN 23-Apr-12 00:30 sparsezoo/analyze_cli.py
--rw-rw-r--  2.0 unx     3015 b- defN 23-Apr-12 00:30 sparsezoo/download_main.py
--rw-rw-r--  2.0 unx    14757 b- defN 23-Apr-12 00:30 sparsezoo/main.py
--rw-rw-r--  2.0 unx     4134 b- defN 23-Apr-12 00:30 sparsezoo/package.py
--rw-rw-r--  2.0 unx     1492 b- defN 23-Apr-12 00:30 sparsezoo/version.py
--rw-rw-r--  2.0 unx      685 b- defN 23-Apr-12 00:30 sparsezoo/analyze/__init__.py
--rw-rw-r--  2.0 unx    46300 b- defN 23-Apr-12 00:30 sparsezoo/analyze/analysis.py
--rw-rw-r--  2.0 unx     5517 b- defN 23-Apr-12 00:30 sparsezoo/analyze/cli.py
--rw-rw-r--  2.0 unx      633 b- defN 23-Apr-12 00:30 sparsezoo/analyze/utils/__init__.py
--rw-rw-r--  2.0 unx    14722 b- defN 23-Apr-12 00:30 sparsezoo/analyze/utils/chart.py
--rw-rw-r--  2.0 unx     6969 b- defN 23-Apr-12 00:30 sparsezoo/analyze/utils/models.py
--rw-rw-r--  2.0 unx      706 b- defN 23-Apr-12 00:30 sparsezoo/api/__init__.py
--rw-rw-r--  2.0 unx     2749 b- defN 23-Apr-12 00:30 sparsezoo/api/graphql.py
--rw-rw-r--  2.0 unx     6332 b- defN 23-Apr-12 00:30 sparsezoo/api/query_parser.py
--rw-rw-r--  2.0 unx     1308 b- defN 23-Apr-12 00:30 sparsezoo/api/utils.py
--rw-rw-r--  2.0 unx      653 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/__init__.py
--rw-rw-r--  2.0 unx     7694 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/cli.py
--rw-rw-r--  2.0 unx     2138 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/main.py
--rw-rw-r--  2.0 unx      886 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/docker/Dockerfile
--rw-rw-r--  2.0 unx      898 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/docker/helpers.py
--rw-rw-r--  2.0 unx      680 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/utils/__init__.py
--rw-rw-r--  2.0 unx     3450 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/utils/extractors.py
--rw-rw-r--  2.0 unx    12563 b- defN 23-Apr-12 00:30 sparsezoo/deployment_package/utils/utils.py
--rw-rw-r--  2.0 unx      666 b- defN 23-Apr-12 00:30 sparsezoo/inference/__init__.py
--rw-rw-r--  2.0 unx     5813 b- defN 23-Apr-12 00:30 sparsezoo/inference/inference_runner.py
--rw-rw-r--  2.0 unx      676 b- defN 23-Apr-12 00:30 sparsezoo/model/__init__.py
--rw-rw-r--  2.0 unx    27809 b- defN 23-Apr-12 00:30 sparsezoo/model/model.py
--rw-rw-r--  2.0 unx     2127 b- defN 23-Apr-12 00:30 sparsezoo/model/result_utils.py
--rw-rw-r--  2.0 unx    21680 b- defN 23-Apr-12 00:30 sparsezoo/model/utils.py
--rw-rw-r--  2.0 unx      706 b- defN 23-Apr-12 00:30 sparsezoo/objects/__init__.py
--rw-rw-r--  2.0 unx     9619 b- defN 23-Apr-12 00:30 sparsezoo/objects/directories.py
--rw-rw-r--  2.0 unx    11279 b- defN 23-Apr-12 00:30 sparsezoo/objects/directory.py
--rw-rw-r--  2.0 unx    11323 b- defN 23-Apr-12 00:30 sparsezoo/objects/file.py
--rw-rw-r--  2.0 unx      656 b- defN 23-Apr-12 00:30 sparsezoo/search/__init__.py
--rw-rw-r--  2.0 unx     5796 b- defN 23-Apr-12 00:30 sparsezoo/search/search.py
--rw-rw-r--  2.0 unx     1238 b- defN 23-Apr-12 00:30 sparsezoo/utils/__init__.py
--rw-rw-r--  2.0 unx     5449 b- defN 23-Apr-12 00:30 sparsezoo/utils/authentication.py
--rw-rw-r--  2.0 unx    11681 b- defN 23-Apr-12 00:30 sparsezoo/utils/calculate_ops.py
--rw-rw-r--  2.0 unx     3993 b- defN 23-Apr-12 00:30 sparsezoo/utils/constants.py
--rw-rw-r--  2.0 unx    11125 b- defN 23-Apr-12 00:30 sparsezoo/utils/data.py
--rw-rw-r--  2.0 unx     6835 b- defN 23-Apr-12 00:30 sparsezoo/utils/download.py
--rw-rw-r--  2.0 unx     1877 b- defN 23-Apr-12 00:30 sparsezoo/utils/gdpr.py
--rw-rw-r--  2.0 unx     9003 b- defN 23-Apr-12 00:30 sparsezoo/utils/graph_editor.py
--rw-rw-r--  2.0 unx     2647 b- defN 23-Apr-12 00:30 sparsezoo/utils/helpers.py
--rw-rw-r--  2.0 unx    11721 b- defN 23-Apr-12 00:30 sparsezoo/utils/node_inference.py
--rw-rw-r--  2.0 unx     8786 b- defN 23-Apr-12 00:30 sparsezoo/utils/numpy.py
--rw-rw-r--  2.0 unx    14420 b- defN 23-Apr-12 00:30 sparsezoo/utils/onnx.py
--rw-rw-r--  2.0 unx     3269 b- defN 23-Apr-12 00:30 sparsezoo/utils/task_name.py
--rw-rw-r--  2.0 unx      935 b- defN 23-Apr-12 00:30 sparsezoo/utils/standardization/__init__.py
--rw-rw-r--  2.0 unx     2833 b- defN 23-Apr-12 00:30 sparsezoo/utils/standardization/feature_status.py
--rw-rw-r--  2.0 unx     6783 b- defN 23-Apr-12 00:30 sparsezoo/utils/standardization/feature_status_page.py
--rw-rw-r--  2.0 unx     5935 b- defN 23-Apr-12 00:30 sparsezoo/utils/standardization/feature_status_table.py
--rw-rw-r--  2.0 unx     2376 b- defN 23-Apr-12 00:30 sparsezoo/utils/standardization/markdown_utils.py
--rw-rw-r--  2.0 unx     4112 b- defN 23-Apr-12 00:30 sparsezoo/utils/standardization/write_status_pages.py
--rw-rw-r--  2.0 unx      687 b- defN 23-Apr-12 00:30 sparsezoo/validation/__init__.py
--rw-rw-r--  2.0 unx     2117 b- defN 23-Apr-12 00:30 sparsezoo/validation/integrations.py
--rw-rw-r--  2.0 unx     8780 b- defN 23-Apr-12 00:30 sparsezoo/validation/validator.py
--rw-rw-r--  2.0 unx    11353 b- defN 23-Apr-12 00:30 sparsezoo_nightly-1.5.0.20230412.dist-info/LICENSE
--rw-rw-r--  2.0 unx    19825 b- defN 23-Apr-12 00:30 sparsezoo_nightly-1.5.0.20230412.dist-info/METADATA
--rw-rw-r--  2.0 unx     1414 b- defN 23-Apr-12 00:30 sparsezoo_nightly-1.5.0.20230412.dist-info/NOTICE
--rw-rw-r--  2.0 unx       92 b- defN 23-Apr-12 00:30 sparsezoo_nightly-1.5.0.20230412.dist-info/WHEEL
--rw-rw-r--  2.0 unx      217 b- defN 23-Apr-12 00:30 sparsezoo_nightly-1.5.0.20230412.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx       10 b- defN 23-Apr-12 00:30 sparsezoo_nightly-1.5.0.20230412.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     5946 b- defN 23-Apr-12 00:30 sparsezoo_nightly-1.5.0.20230412.dist-info/RECORD
-66 files, 411710 bytes uncompressed, 120437 bytes compressed:  70.7%
+Zip file size: 131412 bytes, number of entries: 67
+-rw-rw-r--  2.0 unx     1002 b- defN 23-Apr-18 00:30 sparsezoo/__init__.py
+-rw-rw-r--  2.0 unx     5138 b- defN 23-Apr-18 00:30 sparsezoo/analytics.py
+-rw-rw-r--  2.0 unx     4090 b- defN 23-Apr-18 00:30 sparsezoo/analyze_cli.py
+-rw-rw-r--  2.0 unx     3015 b- defN 23-Apr-18 00:30 sparsezoo/download_main.py
+-rw-rw-r--  2.0 unx    14757 b- defN 23-Apr-18 00:30 sparsezoo/main.py
+-rw-rw-r--  2.0 unx     4134 b- defN 23-Apr-18 00:30 sparsezoo/package.py
+-rw-rw-r--  2.0 unx     1492 b- defN 23-Apr-18 00:30 sparsezoo/version.py
+-rw-rw-r--  2.0 unx      685 b- defN 23-Apr-18 00:30 sparsezoo/analyze/__init__.py
+-rw-rw-r--  2.0 unx    46300 b- defN 23-Apr-18 00:30 sparsezoo/analyze/analysis.py
+-rw-rw-r--  2.0 unx     5517 b- defN 23-Apr-18 00:30 sparsezoo/analyze/cli.py
+-rw-rw-r--  2.0 unx      633 b- defN 23-Apr-18 00:30 sparsezoo/analyze/utils/__init__.py
+-rw-rw-r--  2.0 unx    14722 b- defN 23-Apr-18 00:30 sparsezoo/analyze/utils/chart.py
+-rw-rw-r--  2.0 unx     6969 b- defN 23-Apr-18 00:30 sparsezoo/analyze/utils/models.py
+-rw-rw-r--  2.0 unx      732 b- defN 23-Apr-18 00:30 sparsezoo/api/__init__.py
+-rw-rw-r--  2.0 unx     1332 b- defN 23-Apr-18 00:30 sparsezoo/api/exceptions.py
+-rw-rw-r--  2.0 unx     2915 b- defN 23-Apr-18 00:30 sparsezoo/api/graphql.py
+-rw-rw-r--  2.0 unx     6332 b- defN 23-Apr-18 00:30 sparsezoo/api/query_parser.py
+-rw-rw-r--  2.0 unx     1750 b- defN 23-Apr-18 00:30 sparsezoo/api/utils.py
+-rw-rw-r--  2.0 unx      653 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/__init__.py
+-rw-rw-r--  2.0 unx     7694 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/cli.py
+-rw-rw-r--  2.0 unx     2138 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/main.py
+-rw-rw-r--  2.0 unx      886 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/docker/Dockerfile
+-rw-rw-r--  2.0 unx      898 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/docker/helpers.py
+-rw-rw-r--  2.0 unx      680 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/utils/__init__.py
+-rw-rw-r--  2.0 unx     3450 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/utils/extractors.py
+-rw-rw-r--  2.0 unx    12563 b- defN 23-Apr-18 00:30 sparsezoo/deployment_package/utils/utils.py
+-rw-rw-r--  2.0 unx      666 b- defN 23-Apr-18 00:30 sparsezoo/inference/__init__.py
+-rw-rw-r--  2.0 unx     5813 b- defN 23-Apr-18 00:30 sparsezoo/inference/inference_runner.py
+-rw-rw-r--  2.0 unx      676 b- defN 23-Apr-18 00:30 sparsezoo/model/__init__.py
+-rw-rw-r--  2.0 unx    27803 b- defN 23-Apr-18 00:30 sparsezoo/model/model.py
+-rw-rw-r--  2.0 unx     2127 b- defN 23-Apr-18 00:30 sparsezoo/model/result_utils.py
+-rw-rw-r--  2.0 unx    22638 b- defN 23-Apr-18 00:30 sparsezoo/model/utils.py
+-rw-rw-r--  2.0 unx      706 b- defN 23-Apr-18 00:30 sparsezoo/objects/__init__.py
+-rw-rw-r--  2.0 unx     9619 b- defN 23-Apr-18 00:30 sparsezoo/objects/directories.py
+-rw-rw-r--  2.0 unx    11279 b- defN 23-Apr-18 00:30 sparsezoo/objects/directory.py
+-rw-rw-r--  2.0 unx    11323 b- defN 23-Apr-18 00:30 sparsezoo/objects/file.py
+-rw-rw-r--  2.0 unx      656 b- defN 23-Apr-18 00:30 sparsezoo/search/__init__.py
+-rw-rw-r--  2.0 unx     5796 b- defN 23-Apr-18 00:30 sparsezoo/search/search.py
+-rw-rw-r--  2.0 unx     1238 b- defN 23-Apr-18 00:30 sparsezoo/utils/__init__.py
+-rw-rw-r--  2.0 unx     5449 b- defN 23-Apr-18 00:30 sparsezoo/utils/authentication.py
+-rw-rw-r--  2.0 unx    11681 b- defN 23-Apr-18 00:30 sparsezoo/utils/calculate_ops.py
+-rw-rw-r--  2.0 unx     3993 b- defN 23-Apr-18 00:30 sparsezoo/utils/constants.py
+-rw-rw-r--  2.0 unx    11125 b- defN 23-Apr-18 00:30 sparsezoo/utils/data.py
+-rw-rw-r--  2.0 unx     6835 b- defN 23-Apr-18 00:30 sparsezoo/utils/download.py
+-rw-rw-r--  2.0 unx     1877 b- defN 23-Apr-18 00:30 sparsezoo/utils/gdpr.py
+-rw-rw-r--  2.0 unx     9003 b- defN 23-Apr-18 00:30 sparsezoo/utils/graph_editor.py
+-rw-rw-r--  2.0 unx     2647 b- defN 23-Apr-18 00:30 sparsezoo/utils/helpers.py
+-rw-rw-r--  2.0 unx    11721 b- defN 23-Apr-18 00:30 sparsezoo/utils/node_inference.py
+-rw-rw-r--  2.0 unx     8786 b- defN 23-Apr-18 00:30 sparsezoo/utils/numpy.py
+-rw-rw-r--  2.0 unx    14420 b- defN 23-Apr-18 00:30 sparsezoo/utils/onnx.py
+-rw-rw-r--  2.0 unx     3269 b- defN 23-Apr-18 00:30 sparsezoo/utils/task_name.py
+-rw-rw-r--  2.0 unx      935 b- defN 23-Apr-18 00:30 sparsezoo/utils/standardization/__init__.py
+-rw-rw-r--  2.0 unx     2833 b- defN 23-Apr-18 00:30 sparsezoo/utils/standardization/feature_status.py
+-rw-rw-r--  2.0 unx     6783 b- defN 23-Apr-18 00:30 sparsezoo/utils/standardization/feature_status_page.py
+-rw-rw-r--  2.0 unx     5935 b- defN 23-Apr-18 00:30 sparsezoo/utils/standardization/feature_status_table.py
+-rw-rw-r--  2.0 unx     2376 b- defN 23-Apr-18 00:30 sparsezoo/utils/standardization/markdown_utils.py
+-rw-rw-r--  2.0 unx     4112 b- defN 23-Apr-18 00:30 sparsezoo/utils/standardization/write_status_pages.py
+-rw-rw-r--  2.0 unx      687 b- defN 23-Apr-18 00:30 sparsezoo/validation/__init__.py
+-rw-rw-r--  2.0 unx     2117 b- defN 23-Apr-18 00:30 sparsezoo/validation/integrations.py
+-rw-rw-r--  2.0 unx     8780 b- defN 23-Apr-18 00:30 sparsezoo/validation/validator.py
+-rw-rw-r--  2.0 unx    11353 b- defN 23-Apr-18 00:30 sparsezoo_nightly-1.5.0.20230418.dist-info/LICENSE
+-rw-rw-r--  2.0 unx    19825 b- defN 23-Apr-18 00:30 sparsezoo_nightly-1.5.0.20230418.dist-info/METADATA
+-rw-rw-r--  2.0 unx     1414 b- defN 23-Apr-18 00:30 sparsezoo_nightly-1.5.0.20230418.dist-info/NOTICE
+-rw-rw-r--  2.0 unx       92 b- defN 23-Apr-18 00:30 sparsezoo_nightly-1.5.0.20230418.dist-info/WHEEL
+-rw-rw-r--  2.0 unx      217 b- defN 23-Apr-18 00:30 sparsezoo_nightly-1.5.0.20230418.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx       10 b- defN 23-Apr-18 00:30 sparsezoo_nightly-1.5.0.20230418.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     6030 b- defN 23-Apr-18 00:30 sparsezoo_nightly-1.5.0.20230418.dist-info/RECORD
+67 files, 415122 bytes uncompressed, 121760 bytes compressed:  70.7%
```

## zipnote {}

```diff
@@ -36,14 +36,17 @@
 
 Filename: sparsezoo/analyze/utils/models.py
 Comment: 
 
 Filename: sparsezoo/api/__init__.py
 Comment: 
 
+Filename: sparsezoo/api/exceptions.py
+Comment: 
+
 Filename: sparsezoo/api/graphql.py
 Comment: 
 
 Filename: sparsezoo/api/query_parser.py
 Comment: 
 
 Filename: sparsezoo/api/utils.py
@@ -171,29 +174,29 @@
 
 Filename: sparsezoo/validation/integrations.py
 Comment: 
 
 Filename: sparsezoo/validation/validator.py
 Comment: 
 
-Filename: sparsezoo_nightly-1.5.0.20230412.dist-info/LICENSE
+Filename: sparsezoo_nightly-1.5.0.20230418.dist-info/LICENSE
 Comment: 
 
-Filename: sparsezoo_nightly-1.5.0.20230412.dist-info/METADATA
+Filename: sparsezoo_nightly-1.5.0.20230418.dist-info/METADATA
 Comment: 
 
-Filename: sparsezoo_nightly-1.5.0.20230412.dist-info/NOTICE
+Filename: sparsezoo_nightly-1.5.0.20230418.dist-info/NOTICE
 Comment: 
 
-Filename: sparsezoo_nightly-1.5.0.20230412.dist-info/WHEEL
+Filename: sparsezoo_nightly-1.5.0.20230418.dist-info/WHEEL
 Comment: 
 
-Filename: sparsezoo_nightly-1.5.0.20230412.dist-info/entry_points.txt
+Filename: sparsezoo_nightly-1.5.0.20230418.dist-info/entry_points.txt
 Comment: 
 
-Filename: sparsezoo_nightly-1.5.0.20230412.dist-info/top_level.txt
+Filename: sparsezoo_nightly-1.5.0.20230418.dist-info/top_level.txt
 Comment: 
 
-Filename: sparsezoo_nightly-1.5.0.20230412.dist-info/RECORD
+Filename: sparsezoo_nightly-1.5.0.20230418.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## sparsezoo/analytics.py

```diff
@@ -102,23 +102,30 @@
         return decorator
 
     def send_event(
         self,
         event_name: str,
         event_params: Optional[Dict[str, str]] = None,
         raise_errors: bool = False,
+        _await_response: bool = False,
     ):
         """
         Send an event
 
         :param event_name: the name of the event to send
         :param event_params: optional dictionary of parameters to send with the event
         :param raise_errors: True to raise any errors that occur, False otherwise
+        :param _await_response: (testing only) True to wait for analytics request
+            thread to complete before returning. Default False
         """
         if self._disabled:
+            if _await_response:
+                raise ValueError(
+                    "_await_response cannot be set to True when analytics is disabled"
+                )
             return
 
         if not event_params:
             event_params = {}
 
         def _send_request():
             event_params.update(self._package_params)
@@ -145,10 +152,13 @@
 
                 if raise_errors:
                     raise err
 
         thread = threading.Thread(target=_send_request)
         thread.start()
 
+        if _await_response:
+            thread.join()
+
 
 # analytics client for sparsezoo, to disable set NM_DISABLE_ANALYTICS=1
 sparsezoo_analytics = GoogleAnalytics("sparsezoo", sparsezoo_version)
```

## sparsezoo/api/__init__.py

```diff
@@ -10,10 +10,11 @@
 # software distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
 # flake8: noqa
 
+from .exceptions import *
 from .graphql import *
 from .query_parser import *
 from .utils import *
```

## sparsezoo/api/graphql.py

```diff
@@ -15,26 +15,27 @@
 
 from typing import Any, Dict, List, Optional, Union
 
 import requests
 
 from sparsezoo.utils import BASE_API_URL
 
+from .exceptions import graphqlapi_exception_handler, validate_graphql_response
 from .query_parser import QueryParser
 from .utils import map_keys, to_snake_case
 
 
 class GraphQLAPI:
     def fetch(
         self,
         operation_body: str,
         arguments: Optional[Dict[str, Any]] = None,
         fields: Optional[Union[List[str], Dict[str, Optional[Dict]]]] = None,
         url: Optional[str] = None,
-    ) -> Dict[str, Any]:
+    ) -> List[Dict[str, Any]]:
         """
         Fetch data for models via api. Uses graphql convention of post,
             not get for requests.
         Input args are parsed to make a query body for the api request.
         For more details on the appropriate values, please refer to the
             url endpoint on the browser
 
@@ -51,14 +52,15 @@
         )
 
         return [
             map_keys(dictionary=response_object, mapper=to_snake_case)
             for response_object in response_objects
         ]
 
+    @graphqlapi_exception_handler
     def make_request(
         self,
         operation_body: str,
         arguments: Optional[Dict[str, str]] = None,
         fields: Optional[List[str]] = None,
         url: Optional[str] = None,
     ) -> Dict[str, Any]:
@@ -72,11 +74,11 @@
             operation_body=operation_body, arguments=arguments, fields=fields
         )
 
         response = requests.post(
             url=url or f"{BASE_API_URL}/v2/graphql", json={"query": query.query_body}
         )
 
-        response.raise_for_status()
+        validate_graphql_response(response=response, query_body=query.query_body)
         response_json = response.json()
 
         return response_json["data"][query.operation_body]
```

## sparsezoo/api/utils.py

```diff
@@ -8,15 +8,15 @@
 #
 # Unless required by applicable law or agreed to in writing,
 # software distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
-from typing import Callable, Dict
+from typing import Any, Callable, Dict, List
 
 
 def to_camel_case(string: str):
     "Convert string to camel case"
     components = string.split("_")
     return components[0] + "".join(word.title() for word in components[1:])
 
@@ -28,11 +28,26 @@
             "_" + character.lower() if character.isupper() else character
             for character in string
         ]
     ).lstrip("_")
 
 
 def map_keys(
-    dictionary: Dict[str, str], mapper: Callable[[str], str]
+    dictionary: Dict[str, Any], mapper: Callable[[str], str]
 ) -> Dict[str, str]:
-    """Given a dictionary, update its key to a given mapper callable"""
-    return {mapper(key): value for key, value in dictionary.items()}
+    """
+    Given a dictionary, update its keys to a given mapper callable.
+
+    If the value of the dict is a List of Dict or Dict of Dict, recursively map
+    its keys
+    """
+    mapped_dict = {}
+    for key, value in dictionary.items():
+        if isinstance(value, List) or isinstance(value, Dict):
+            value_type = type(value)
+            mapped_dict[mapper(key)] = value_type(
+                map_keys(dictionary=sub_dict, mapper=mapper) for sub_dict in value
+            )
+        else:
+            mapped_dict[mapper(key)] = value
+
+    return mapped_dict
```

## sparsezoo/model/model.py

```diff
@@ -21,14 +21,15 @@
 
 from sparsezoo.analytics import sparsezoo_analytics
 from sparsezoo.inference import ENGINES, InferenceRunner
 from sparsezoo.model.result_utils import ModelResult
 from sparsezoo.model.utils import (
     SAVE_DIR,
     ZOO_STUB_PREFIX,
+    is_stub,
     load_files_from_directory,
     load_files_from_stub,
     save_outputs_to_tar,
 )
 from sparsezoo.objects import (
     Directory,
     File,
@@ -74,15 +75,15 @@
     """
 
     def __init__(self, source: str, download_path: Optional[str] = None):
         sparsezoo_analytics.send_event("python__model__init")
         self.source = source
         self._stub_params = {}
 
-        if self.source.startswith(ZOO_STUB_PREFIX):
+        if is_stub(self.source):
             # initializing the files and params from the stub
             _setup_args = self.initialize_model_from_stub(stub=self.source)
             files, path, url, validation_results, compressed_size = _setup_args
             if download_path is not None:
                 path = download_path  # overwrite cache path with user input
         else:
             # initializing the model from the path
```

## sparsezoo/model/utils.py

```diff
@@ -62,14 +62,34 @@
 _LOGGER = logging.getLogger(__name__)
 
 ZOO_STUB_PREFIX = "zoo:"
 CACHE_DIR = os.path.expanduser(os.path.join("~", ".cache", "sparsezoo"))
 SAVE_DIR = os.getenv("SPARSEZOO_MODELS_PATH", CACHE_DIR)
 COMPRESSED_FILE_NAME = "model.onnx.tar.gz"
 
+STUB_V1_REGEX_EXPR = (
+    r"^(zoo:)?"
+    r"(?P<domain>[\.A-z0-9_]+)"
+    r"/(?P<sub_domain>[\.A-z0-9_]+)"
+    r"/(?P<architecture>[\.A-z0-9_]+)(-(?P<sub_architecture>[\.A-z0-9_]+))?"
+    r"/(?P<framework>[\.A-z0-9_]+)"
+    r"/(?P<repo>[\.A-z0-9_]+)"
+    r"/(?P<dataset>[\.A-z0-9_]+)(-(?P<training_scheme>[\.A-z0-9_]+))?"
+    r"/(?P<sparse_tag>[\.A-z0-9_-]+)"
+)
+
+STUB_V2_REGEX_EXPR = (
+    r"^(zoo:)?"
+    r"(?P<architecture>[\.A-z0-9_]+)"
+    r"(-(?P<sub_architecture>[\.A-z0-9_]+))?"
+    r"-(?P<source_dataset>[\.A-z0-9_]+)"
+    r"(-(?P<training_dataset>[\.A-z0-9_]+))?"
+    r"-(?P<sparse_tag>[\.A-z0-9_]+)"
+)
+
 
 def load_files_from_directory(directory_path: str) -> List[Dict[str, Any]]:
     """
     :param directory_path: a path to the directory,
         that contains model files in the expected structure
     :return list of file dictionaries
     """
@@ -114,41 +134,52 @@
     arguments = get_model_metadata_from_stub(stub)
 
     api = GraphQLAPI()
 
     models = api.fetch(
         operation_body="models",
         arguments=arguments,
-        fields=["modelId", "modelOnnxSizeCompressedBytes"],
+        fields=[
+            "model_id",
+            "model_onnx_size_compressed_bytes",
+            "files",
+            "benchmark_results",
+            "training_results",
+        ],
     )
 
-    if len(models):
-        model_id = models[0]["model_id"]
-
-        files = api.fetch(
-            operation_body="files",
-            arguments={"model_id": model_id},
+    matching_models = len(models)
+    if matching_models == 0:
+        raise ValueError(
+            f"No matching models found with stub: {stub}." "Please try another stub"
         )
+    if matching_models > 1:
+        logging.warning(
+            f"{len(models)} found from the stub: {stub}"
+            "Using the first model to obtain metadata."
+            "Proceed with caution"
+        )
+
+    if matching_models:
+        model = models[0]
+
+        model_id = model["model_id"]
+
+        files = model.get("files")
         include_file_download_url(files)
         files = restructure_request_json(request_json=files)
 
         if params is not None:
             files = filter_files(files=files, params=params)
 
-        training_results = api.fetch(
-            operation_body="training_results",
-            arguments={"model_id": model_id},
-        )
+        training_results = model.get("training_results")
 
-        benchmark_results = api.fetch(
-            operation_body="benchmark_results",
-            arguments={"model_id": model_id},
-        )
+        benchmark_results = model.get("benchmark_results")
 
-        model_onnx_size_compressed_bytes = models[0]["model_onnx_size_compressed_bytes"]
+        model_onnx_size_compressed_bytes = model.get("model_onnx_size_compressed_bytes")
 
         throughput_results = [
             ThroughputResults(**benchmark_result)
             for benchmark_result in benchmark_results
         ]
         validation_results = [
             ValidationResult(**training_result) for training_result in training_results
@@ -549,49 +580,52 @@
 def include_file_download_url(files: List[Dict]):
     for file in files:
         file["url"] = get_file_download_url(
             model_id=file["model_id"], file_name=file["display_name"]
         )
 
 
+def get_model_metadata_from_stub(stub: str) -> Dict[str, str]:
+    """Return a dictionary of the model metadata from stub"""
+
+    matches = re.match(STUB_V1_REGEX_EXPR, stub) or re.match(STUB_V2_REGEX_EXPR, stub)
+    if not matches:
+        return {}
+
+    if "source_dataset" in matches.groupdict():
+        return {"repo_name": stub}
+
+    if "dataset" in matches.groupdict():
+        return {
+            "domain": matches.group("domain"),
+            "sub_domain": matches.group("sub_domain"),
+            "architecture": matches.group("architecture"),
+            "sub_architecture": matches.group("sub_architecture"),
+            "framework": matches.group("framework"),
+            "repo": matches.group("repo"),
+            "dataset": matches.group("dataset"),
+            "sparse_tag": matches.group("sparse_tag"),
+        }
+
+    return {}
+
+
+def is_stub(candidate: str) -> bool:
+    return bool(
+        re.match(STUB_V1_REGEX_EXPR, candidate)
+        or re.match(STUB_V2_REGEX_EXPR, candidate)
+    )
+
+
 def get_file_download_url(
     model_id: str,
     file_name: str,
     base_url: str = BASE_API_URL,
 ):
     """Url to download a file"""
     download_url = f"{base_url}/v2/models/{model_id}/files/{file_name}"
 
     # important, do not remove
     if convert_to_bool(os.getenv("SPARSEZOO_TEST_MODE")):
         download_url += "?increment_download=False"
 
     return download_url
-
-
-def get_model_metadata_from_stub(stub: str) -> Dict[str, str]:
-    """
-    Return a dictionary of the model metadata from stub
-    """
-
-    stub_regex_expr = (
-        r"^(zoo:)?"
-        r"(?P<domain>[\.A-z0-9_]+)"
-        r"/(?P<sub_domain>[\.A-z0-9_]+)"
-        r"/(?P<architecture>[\.A-z0-9_]+)(-(?P<sub_architecture>[\.A-z0-9_]+))?"
-        r"/(?P<framework>[\.A-z0-9_]+)"
-        r"/(?P<repo>[\.A-z0-9_]+)"
-        r"/(?P<dataset>[\.A-z0-9_]+)"
-        r"/(?P<sparse_tag>[\.A-z0-9_-]+)"
-    )
-    matches = re.match(stub_regex_expr, stub)
-
-    return {
-        "domain": matches.group("domain"),
-        "sub_domain": matches.group("sub_domain"),
-        "architecture": matches.group("architecture"),
-        "sub_architecture": matches.group("sub_architecture"),
-        "framework": matches.group("framework"),
-        "repo": matches.group("repo"),
-        "dataset": matches.group("dataset"),
-        "sparse_tag": matches.group("sparse_tag"),
-    }
```

## Comparing `sparsezoo_nightly-1.5.0.20230412.dist-info/LICENSE` & `sparsezoo_nightly-1.5.0.20230418.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `sparsezoo_nightly-1.5.0.20230412.dist-info/METADATA` & `sparsezoo_nightly-1.5.0.20230418.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: sparsezoo-nightly
-Version: 1.5.0.20230412
+Version: 1.5.0.20230418
 Summary: Neural network model repository for highly sparse and sparse-quantized models with matching sparsification recipes
 Home-page: https://github.com/neuralmagic/sparsezoo
 Author: Neuralmagic, Inc.
 Author-email: support@neuralmagic.com
 License: Apache
 Keywords: inference,machine learning,neural network,deep learning model,models,computer vision,nlp,pretrained transfer learning,sparsity,pruning,quantization,sparse models,resnet,mobilenet,yolov3
 Platform: UNKNOWN
```

### html2text {}

```diff
@@ -1,8 +1,8 @@
-Metadata-Version: 2.1 Name: sparsezoo-nightly Version: 1.5.0.20230412 Summary:
+Metadata-Version: 2.1 Name: sparsezoo-nightly Version: 1.5.0.20230418 Summary:
 Neural network model repository for highly sparse and sparse-quantized models
 with matching sparsification recipes Home-page: https://github.com/neuralmagic/
 sparsezoo Author: Neuralmagic, Inc. Author-email: support@neuralmagic.com
 License: Apache Keywords: inference,machine learning,neural network,deep
 learning model,models,computer vision,nlp,pretrained transfer
 learning,sparsity,pruning,quantization,sparse models,resnet,mobilenet,yolov3
 Platform: UNKNOWN Classifier: Development Status :: 5 - Production/Stable
```

## Comparing `sparsezoo_nightly-1.5.0.20230412.dist-info/NOTICE` & `sparsezoo_nightly-1.5.0.20230418.dist-info/NOTICE`

 * *Files identical despite different names*

## Comparing `sparsezoo_nightly-1.5.0.20230412.dist-info/RECORD` & `sparsezoo_nightly-1.5.0.20230418.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,38 +1,39 @@
 sparsezoo/__init__.py,sha256=Ibkd7FPpqDLPnq1JBT5UTGMdt71VNJqew-PejiTXC4Q,1002
-sparsezoo/analytics.py,sha256=_LgpqNs26Ad1uaRqyO4j2PlOcfcn8TrqZT3Rch9p-tM,4728
+sparsezoo/analytics.py,sha256=Ju6xBh-BAdz8ShGsxYru02rlZJznxmrIdrvdD0R11sQ,5138
 sparsezoo/analyze_cli.py,sha256=eNdczM21gtZes5OjD0jj-J1iO326zRwpb_k-PC78Cu0,4090
 sparsezoo/download_main.py,sha256=VNIyy7y-6ihi2Mmbz1Ng5wE3YcPLrZu0CbgqNqkhMUk,3015
 sparsezoo/main.py,sha256=_N-Y-nzOigQo1qWPCRudS5Qh9SzVCE3pPVgv8j0JEQs,14757
 sparsezoo/package.py,sha256=inDNel1Ks662jClI7CfkzLds0_swGqjjLAOQ92wwOF0,4134
 sparsezoo/version.py,sha256=IN1sgnHD9KyJqYPd6YVPr-BgKyFdf-2vA9c5T09wQIM,1492
 sparsezoo/analyze/__init__.py,sha256=590JFn3Pv1EFtNEHL9JPQjEyU-xmB9EMVxrZnGjo8pk,685
 sparsezoo/analyze/analysis.py,sha256=1EXgaW8Ftq2dAxJOKv9ETp_jN1aOeUObp7LPxtc3knc,46300
 sparsezoo/analyze/cli.py,sha256=Qo-PSpnacRmvocP9ts6kYq0MB7i3JLnJwte0qMlHSuI,5517
 sparsezoo/analyze/utils/__init__.py,sha256=TF5uEKrpc2qYdbgmXh9xVp2GQ3p--by-LoCegY19EeI,633
 sparsezoo/analyze/utils/chart.py,sha256=eJbJTe60PYxvGU0fHxd88Lbjk-YKMd8uO5zoZkby-Hc,14722
 sparsezoo/analyze/utils/models.py,sha256=wB8ZNruSCeNVEaKD2zEMrJA-V1Fkq3GYKKjOYAw-CRE,6969
-sparsezoo/api/__init__.py,sha256=bMzwZRZAdIVEhDfO7zP2Z2oKCdWWsHxPolOcgIxylgM,706
-sparsezoo/api/graphql.py,sha256=JYpejgUroBsGrRJPFuF7fvW-3pfz9Cs88O0gvBOR1A8,2749
+sparsezoo/api/__init__.py,sha256=7gwqr30TpkQoWsd6mLpUecSkKZmogMGVLdgo5fMW3Go,732
+sparsezoo/api/exceptions.py,sha256=DiM7FxdG7ktuY1EjhNheSPXUZjcyyFxtqjNarp0Bg-8,1332
+sparsezoo/api/graphql.py,sha256=sGhU2vVVI07Pq0QrONLcG-YVSbdzAE6OGy0MtBB5KGg,2915
 sparsezoo/api/query_parser.py,sha256=UjsCYoaHm2m4CBzT856opI6sRktCkH4j4U0wrvItKcw,6332
-sparsezoo/api/utils.py,sha256=Pi-8ZAA1slUaP7KmqHJ44ig3yaI8JORXncaHfqk-zA8,1308
+sparsezoo/api/utils.py,sha256=vhrlo1JOg4hXQrirH2D0XxaU1hiLMvlvm6IxfW2QB_M,1750
 sparsezoo/deployment_package/__init__.py,sha256=hwgyNki_YjqwOjt4i6c3m45Bwcx78Hf4vs2jzCkHPv4,653
 sparsezoo/deployment_package/cli.py,sha256=qCQKCFFHTMRUfOJgRXhv_M0tWoB5nOuBXWZ-niYor9E,7694
 sparsezoo/deployment_package/main.py,sha256=tFkZh2ubEKHmYWZgktwmYxZ5KoWeNb0Ai96fDex6bOo,2138
 sparsezoo/deployment_package/docker/Dockerfile,sha256=__4RMXEAsYy_BKV0-eXOkTaqcfmgcUIhOjyUlWvsvAc,886
 sparsezoo/deployment_package/docker/helpers.py,sha256=DxZQb_feOawnIh-8mimksxk8jgVvSlBK5Upf0ZmfD44,898
 sparsezoo/deployment_package/utils/__init__.py,sha256=8ddpb2k4XCI6hPTAglPZSXR432pdzEXY1u8FNv2icUE,680
 sparsezoo/deployment_package/utils/extractors.py,sha256=ABjinzFiG41M4dMkUjTL-P54nPib_omPqeNkiTZsN2I,3450
 sparsezoo/deployment_package/utils/utils.py,sha256=PC1aYGRI6RtU3BWC2dOkkfdqODaeEDoSyM8-GmeZF2Q,12563
 sparsezoo/inference/__init__.py,sha256=1qep3wddVIyLYXd2casIa3wBDSK5Msw9rxUNro8I1BQ,666
 sparsezoo/inference/inference_runner.py,sha256=R3yAKMQ9HgM57TQ15o8qp7VZWSUy6U6F282Qs6oN92I,5813
 sparsezoo/model/__init__.py,sha256=dmczWaTIPI42TC1JXu9ODx84igsR8nhFeTXu13x2gnc,676
-sparsezoo/model/model.py,sha256=dg_dBK1C5q8eCjkna-vVzQYM5UDc5_UODSSpQNWb-ko,27809
+sparsezoo/model/model.py,sha256=1GI4JZhyihTo7sI42ihsgerIpNQtvo1p7iAXmhWqScs,27803
 sparsezoo/model/result_utils.py,sha256=_rbWvmQY-zcP-Gv5plwv9EO1zPl8zlUkydnn0WVUjYg,2127
-sparsezoo/model/utils.py,sha256=zVCJ6n1rXS5ljwipTR8QNIM1ek9SCiK1x1vNWL2jjVQ,21680
+sparsezoo/model/utils.py,sha256=MD7R4GV41d5anNwxFeYb8Dsx9COauuWpQb2NxDVYlj4,22638
 sparsezoo/objects/__init__.py,sha256=0F_kRIrVBvD1YaavuZxqRj3rYyl_YWyP7-_SApm3t8A,706
 sparsezoo/objects/directories.py,sha256=yZ5smq1kQKXIMBOA3pz_zbW7QXaS5UASiI6tlRJQSyk,9619
 sparsezoo/objects/directory.py,sha256=1o2bF5ScKnTYR3cxZ2mIwRBn1x_tBduA8H57r8xfk7I,11279
 sparsezoo/objects/file.py,sha256=JFmznZJGVctAfrcZLD84cKwnV5Ds5F2mxvvNpLIMwHI,11323
 sparsezoo/search/__init__.py,sha256=BGHMmvs5gxM5HOmoKdSACCRFbLpnI1u20Jm6s6o97KY,656
 sparsezoo/search/search.py,sha256=yDcOUFPSv02WzfKEtL1HF9OmAYs4lDFDMnAn4AZcf_k,5796
 sparsezoo/utils/__init__.py,sha256=9POenKxcB_XRkOrau8safN_e5HzMuNLFQEpV3i0U-ww,1238
@@ -53,14 +54,14 @@
 sparsezoo/utils/standardization/feature_status_page.py,sha256=F6F1pIvwzcixKyu6vj6Kw_ZIwV1ZwFdj9lhqObwxlkY,6783
 sparsezoo/utils/standardization/feature_status_table.py,sha256=p3BPpgcBF5GKpngt8iqSeqb9mHgtTTlaj8cEVDKz6Jw,5935
 sparsezoo/utils/standardization/markdown_utils.py,sha256=MjnZ9JFwZ9_mZ2-fG-MJPBWYnSL9MNqQ2qxLeGr0bFw,2376
 sparsezoo/utils/standardization/write_status_pages.py,sha256=K4ZscAX_xKl-d4ZQ2z4fEc4qGAcLHYCrsDTd9wV0xBc,4112
 sparsezoo/validation/__init__.py,sha256=3nxA-dWMpSjQ4Sz4kkRQP6cr2L7rZEvoNd1RCZiswAg,687
 sparsezoo/validation/integrations.py,sha256=aVLvdFQs7K1KzGFUNLe5La67MjNHW0yNaRXdJdRgI00,2117
 sparsezoo/validation/validator.py,sha256=x918oFHrvhJImljoweYvF0PVMO1sqJNwT0HKGfEXyy0,8780
-sparsezoo_nightly-1.5.0.20230412.dist-info/LICENSE,sha256=1KsbiqMUywdsP8MBywGsGxGf0Di1PHm1XIjWC24QNps,11353
-sparsezoo_nightly-1.5.0.20230412.dist-info/METADATA,sha256=2Yu2KbETSIyOIuEHxrzUxQ4L2UFLetHcvdvMmoWQT08,19825
-sparsezoo_nightly-1.5.0.20230412.dist-info/NOTICE,sha256=naAyHz-LxMVCUVA27ssHBRIifnAixYvIhas5XTnEiO8,1414
-sparsezoo_nightly-1.5.0.20230412.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-sparsezoo_nightly-1.5.0.20230412.dist-info/entry_points.txt,sha256=2tpzvrHBD--Om3jpHnfw1gx6EqA2IPFqnfJIl-RPX3o,217
-sparsezoo_nightly-1.5.0.20230412.dist-info/top_level.txt,sha256=SE5RMAyyIBKn6fDrXXF33MqdfB2Am0a9n9HRLAcrcZI,10
-sparsezoo_nightly-1.5.0.20230412.dist-info/RECORD,,
+sparsezoo_nightly-1.5.0.20230418.dist-info/LICENSE,sha256=1KsbiqMUywdsP8MBywGsGxGf0Di1PHm1XIjWC24QNps,11353
+sparsezoo_nightly-1.5.0.20230418.dist-info/METADATA,sha256=u6uNA5oowlFBjtU9lfPXfYRCWfw0CRitJUlkO992HHw,19825
+sparsezoo_nightly-1.5.0.20230418.dist-info/NOTICE,sha256=naAyHz-LxMVCUVA27ssHBRIifnAixYvIhas5XTnEiO8,1414
+sparsezoo_nightly-1.5.0.20230418.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
+sparsezoo_nightly-1.5.0.20230418.dist-info/entry_points.txt,sha256=2tpzvrHBD--Om3jpHnfw1gx6EqA2IPFqnfJIl-RPX3o,217
+sparsezoo_nightly-1.5.0.20230418.dist-info/top_level.txt,sha256=SE5RMAyyIBKn6fDrXXF33MqdfB2Am0a9n9HRLAcrcZI,10
+sparsezoo_nightly-1.5.0.20230418.dist-info/RECORD,,
```

