# Comparing `tmp/karrio.server.core-2023.3.4-py3-none-any.whl.zip` & `tmp/karrio.server.core-2023.4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,76 +1,81 @@
-Zip file size: 138172 bytes, number of entries: 165
+Zip file size: 146346 bytes, number of entries: 174
 -rw-rw-r--  2.0 unx     1456 b- defN 22-Dec-29 00:19 karrio/server/conf.py
 -rw-rw-r--  2.0 unx     2082 b- defN 23-Mar-03 13:50 karrio/server/openapi.py
 -rw-rw-r--  2.0 unx      140 b- defN 22-Nov-15 19:21 karrio/server/core/__init__.py
 -rw-rw-r--  2.0 unx       33 b- defN 22-Nov-15 19:21 karrio/server/core/admin.py
 -rw-rw-r--  2.0 unx      211 b- defN 23-Mar-03 13:50 karrio/server/core/apps.py
 -rw-rw-r--  2.0 unx     9675 b- defN 23-Mar-03 13:50 karrio/server/core/authentication.py
 -rw-rw-r--  2.0 unx      323 b- defN 22-Nov-15 19:21 karrio/server/core/context_processors.py
--rw-rw-r--  2.0 unx     7686 b- defN 23-Mar-29 11:59 karrio/server/core/datatypes.py
--rw-rw-r--  2.0 unx     3279 b- defN 23-Mar-03 13:50 karrio/server/core/dataunits.py
+-rw-rw-r--  2.0 unx     8757 b- defN 23-Apr-15 11:38 karrio/server/core/datatypes.py
+-rw-rw-r--  2.0 unx     3848 b- defN 23-Apr-16 13:12 karrio/server/core/dataunits.py
 -rw-rw-r--  2.0 unx     6024 b- defN 23-Mar-26 13:22 karrio/server/core/exceptions.py
 -rw-rw-r--  2.0 unx      345 b- defN 23-Mar-03 13:50 karrio/server/core/fields.py
--rw-rw-r--  2.0 unx    16303 b- defN 23-Mar-18 05:05 karrio/server/core/filters.py
--rw-rw-r--  2.0 unx    22930 b- defN 23-Mar-29 12:46 karrio/server/core/gateway.py
+-rw-rw-r--  2.0 unx    16645 b- defN 23-Apr-16 09:35 karrio/server/core/filters.py
+-rw-rw-r--  2.0 unx    22781 b- defN 23-Apr-18 10:00 karrio/server/core/gateway.py
 -rw-rw-r--  2.0 unx     3017 b- defN 22-Nov-15 19:21 karrio/server/core/middleware.py
 -rw-rw-r--  2.0 unx      320 b- defN 23-Mar-03 13:50 karrio/server/core/oauth_validators.py
 -rw-rw-r--  2.0 unx     1190 b- defN 22-Nov-15 19:21 karrio/server/core/permissions.py
 -rw-rw-r--  2.0 unx      290 b- defN 22-Nov-15 19:21 karrio/server/core/renderers.py
 -rw-rw-r--  2.0 unx       95 b- defN 22-Nov-15 19:21 karrio/server/core/router.py
--rw-rw-r--  2.0 unx    50018 b- defN 23-Mar-29 12:20 karrio/server/core/serializers.py
+-rw-rw-r--  2.0 unx    52295 b- defN 23-Apr-16 10:25 karrio/server/core/serializers.py
 -rw-rw-r--  2.0 unx      953 b- defN 23-Mar-03 13:50 karrio/server/core/signals.py
 -rw-rw-r--  2.0 unx     1848 b- defN 23-Mar-03 13:50 karrio/server/core/tests.py
 -rw-rw-r--  2.0 unx      337 b- defN 23-Feb-21 00:04 karrio/server/core/urls.py
--rw-rw-r--  2.0 unx     8963 b- defN 23-Mar-29 12:06 karrio/server/core/utils.py
+-rw-rw-r--  2.0 unx     8963 b- defN 23-Mar-29 20:04 karrio/server/core/utils.py
 -rw-rw-r--  2.0 unx    13158 b- defN 23-Mar-03 13:50 karrio/server/core/validators.py
 -rw-rw-r--  2.0 unx      701 b- defN 22-Nov-15 19:21 karrio/server/core/migrations/0001_initial.py
--rw-rw-r--  2.0 unx     2091 b- defN 22-Nov-15 19:21 karrio/server/core/migrations/0002_apilogindex.py
--rw-rw-r--  2.0 unx     1829 b- defN 23-Mar-03 13:50 karrio/server/core/migrations/0003_apilogindex_test_mode.py
+-rw-rw-r--  2.0 unx     2117 b- defN 23-Apr-18 09:47 karrio/server/core/migrations/0002_apilogindex.py
+-rw-rw-r--  2.0 unx     1859 b- defN 23-Apr-18 09:47 karrio/server/core/migrations/0003_apilogindex_test_mode.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-15 19:21 karrio/server/core/migrations/__init__.py
--rw-rw-r--  2.0 unx      471 b- defN 22-Nov-15 19:21 karrio/server/core/models/__init__.py
--rw-rw-r--  2.0 unx     1410 b- defN 23-Mar-03 13:50 karrio/server/core/models/base.py
+-rw-rw-r--  2.0 unx      472 b- defN 23-Apr-15 06:44 karrio/server/core/models/__init__.py
+-rw-rw-r--  2.0 unx     1502 b- defN 23-Apr-18 09:25 karrio/server/core/models/base.py
 -rw-rw-r--  2.0 unx      630 b- defN 22-Nov-15 19:21 karrio/server/core/models/entity.py
 -rw-rw-r--  2.0 unx      552 b- defN 23-Mar-03 13:50 karrio/server/core/models/third_party.py
 -rw-rw-r--  2.0 unx       88 b- defN 22-Nov-15 19:21 karrio/server/core/views/__init__.py
 -rw-rw-r--  2.0 unx     4276 b- defN 23-Mar-03 13:50 karrio/server/core/views/api.py
 -rw-rw-r--  2.0 unx     1309 b- defN 23-Mar-03 13:50 karrio/server/core/views/metadata.py
--rw-rw-r--  2.0 unx     2270 b- defN 23-Mar-03 13:50 karrio/server/core/views/references.py
+-rw-rw-r--  2.0 unx     2475 b- defN 23-Apr-17 21:02 karrio/server/core/views/references.py
 -rw-rw-r--  2.0 unx    11523 b- defN 23-Mar-03 13:50 karrio/server/core/views/schema.py
 -rw-rw-r--  2.0 unx       74 b- defN 23-Mar-03 13:50 karrio/server/filters/__init__.py
--rw-rw-r--  2.0 unx      610 b- defN 23-Mar-03 13:50 karrio/server/filters/abstract.py
+-rw-rw-r--  2.0 unx      739 b- defN 23-Apr-16 09:45 karrio/server/filters/abstract.py
 -rw-rw-r--  2.0 unx       81 b- defN 22-Nov-15 19:21 karrio/server/providers/__init__.py
--rw-rw-r--  2.0 unx     6509 b- defN 23-Mar-03 13:50 karrio/server/providers/admin.py
+-rw-rw-r--  2.0 unx    11257 b- defN 23-Apr-18 08:05 karrio/server/providers/admin.py
 -rw-rw-r--  2.0 unx      217 b- defN 23-Mar-03 13:50 karrio/server/providers/apps.py
 -rw-rw-r--  2.0 unx       95 b- defN 22-Nov-15 19:21 karrio/server/providers/router.py
 -rw-rw-r--  2.0 unx     2611 b- defN 23-Mar-03 13:50 karrio/server/providers/serializers.py
 -rw-rw-r--  2.0 unx      897 b- defN 23-Mar-03 13:50 karrio/server/providers/signals.py
 -rw-rw-r--  2.0 unx       67 b- defN 22-Nov-15 19:21 karrio/server/providers/tests.py
 -rw-rw-r--  2.0 unx      226 b- defN 22-Nov-15 19:21 karrio/server/providers/urls.py
--rw-rw-r--  2.0 unx     5579 b- defN 23-Mar-03 13:50 karrio/server/providers/views.py
+-rw-rw-r--  2.0 unx     5655 b- defN 23-Apr-16 09:45 karrio/server/providers/views.py
 -rw-rw-r--  2.0 unx       81 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/__init__.py
 -rw-rw-r--  2.0 unx       81 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/__init__.py
 -rw-rw-r--  2.0 unx      752 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/amazon_mws.py
 -rw-rw-r--  2.0 unx      732 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/aramex.py
 -rw-rw-r--  2.0 unx      560 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/australiapost.py
+-rw-rw-r--  2.0 unx      637 b- defN 23-Apr-01 16:47 karrio/server/providers/extension/models/boxknight.py
 -rw-rw-r--  2.0 unx      619 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/canadapost.py
 -rw-rw-r--  2.0 unx      462 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/canpar.py
 -rw-rw-r--  2.0 unx      625 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/chronopost.py
 -rw-rw-r--  2.0 unx      678 b- defN 22-Dec-15 20:36 karrio/server/providers/extension/models/dhl_express.py
 -rw-rw-r--  2.0 unx      804 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/dhl_poland.py
 -rw-rw-r--  2.0 unx      531 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/dhl_universal.py
--rw-rw-r--  2.0 unx      511 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/dicom.py
+-rw-rw-r--  2.0 unx      531 b- defN 23-Apr-02 08:25 karrio/server/providers/extension/models/dicom.py
 -rw-rw-r--  2.0 unx     1102 b- defN 23-Mar-27 07:55 karrio/server/providers/extension/models/dpd.py
 -rw-rw-r--  2.0 unx     1144 b- defN 23-Mar-18 11:05 karrio/server/providers/extension/models/dpdhl.py
 -rw-rw-r--  2.0 unx      463 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/easypost.py
 -rw-rw-r--  2.0 unx      512 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/eshipper.py
 -rw-rw-r--  2.0 unx      685 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/fedex.py
 -rw-rw-r--  2.0 unx      524 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/freightcom.py
 -rw-rw-r--  2.0 unx     1389 b- defN 23-Mar-03 13:50 karrio/server/providers/extension/models/generic.py
+-rw-rw-r--  2.0 unx      586 b- defN 23-Apr-18 05:48 karrio/server/providers/extension/models/geodis.py
+-rw-rw-r--  2.0 unx      542 b- defN 23-Apr-18 05:46 karrio/server/providers/extension/models/laposte.py
+-rw-rw-r--  2.0 unx      676 b- defN 23-Apr-18 05:48 karrio/server/providers/extension/models/nationex.py
 -rw-rw-r--  2.0 unx      595 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/purolator.py
+-rw-rw-r--  2.0 unx      465 b- defN 23-Apr-18 05:48 karrio/server/providers/extension/models/roadie.py
 -rw-rw-r--  2.0 unx      488 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/royalmail.py
 -rw-rw-r--  2.0 unx      462 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/sendle.py
 -rw-rw-r--  2.0 unx      488 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/sf_express.py
 -rw-rw-r--  2.0 unx      609 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/tnt.py
 -rw-rw-r--  2.0 unx      670 b- defN 23-Mar-03 13:50 karrio/server/providers/extension/models/ups.py
 -rw-rw-r--  2.0 unx      730 b- defN 23-Mar-03 13:50 karrio/server/providers/extension/models/ups_freight.py
 -rw-rw-r--  2.0 unx      699 b- defN 22-Nov-15 19:21 karrio/server/providers/extension/models/usps.py
@@ -107,34 +112,38 @@
 -rw-rw-r--  2.0 unx      958 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0028_auto_20220323_1500.py
 -rw-rw-r--  2.0 unx      885 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0029_easypostsettings.py
 -rw-rw-r--  2.0 unx     1044 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0030_amazonmwssettings.py
 -rw-rw-r--  2.0 unx      404 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0031_delete_amazonmwssettings.py
 -rw-rw-r--  2.0 unx      463 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0032_alter_carrier_test.py
 -rw-rw-r--  2.0 unx      509 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0033_auto_20220708_1350.py
 -rw-rw-r--  2.0 unx     2027 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0034_amazonmwssettings_dpdhlsettings.py
--rw-rw-r--  2.0 unx     1366 b- defN 23-Mar-03 13:50 karrio/server/providers/migrations/0035_alter_carrier_capabilities.py
+-rw-rw-r--  2.0 unx     1376 b- defN 23-Apr-18 09:47 karrio/server/providers/migrations/0035_alter_carrier_capabilities.py
 -rw-rw-r--  2.0 unx     4488 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0036_upsfreightsettings.py
 -rw-rw-r--  2.0 unx     4358 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0037_chronopostsettings.py
 -rw-rw-r--  2.0 unx      526 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0038_alter_genericsettings_label_template.py
 -rw-rw-r--  2.0 unx      639 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0039_auto_20220906_0612.py
 -rw-rw-r--  2.0 unx      428 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0040_dpdhlsettings_services.py
 -rw-rw-r--  2.0 unx    17652 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/0041_auto_20221105_0705.py
 -rw-rw-r--  2.0 unx     7210 b- defN 22-Dec-15 20:36 karrio/server/providers/migrations/0042_auto_20221215_1642.py
 -rw-rw-r--  2.0 unx     1310 b- defN 23-Mar-03 13:50 karrio/server/providers/migrations/0043_alter_genericsettings_account_number_and_more.py
--rw-rw-r--  2.0 unx     2121 b- defN 23-Mar-03 13:50 karrio/server/providers/migrations/0044_carrier_carrier_capabilities.py
+-rw-rw-r--  2.0 unx     2131 b- defN 23-Apr-18 09:47 karrio/server/providers/migrations/0044_carrier_carrier_capabilities.py
 -rw-rw-r--  2.0 unx      839 b- defN 23-Mar-03 13:50 karrio/server/providers/migrations/0045_alter_carrier_active_alter_carrier_carrier_id.py
 -rw-rw-r--  2.0 unx     1363 b- defN 23-Mar-20 18:49 karrio/server/providers/migrations/0046_remove_dpdhlsettings_signature_and_more.py
 -rw-rw-r--  2.0 unx    11550 b- defN 23-Mar-27 07:55 karrio/server/providers/migrations/0047_dpdsettings.py
--rw-rw-r--  2.0 unx     1842 b- defN 23-Mar-27 07:55 karrio/server/providers/migrations/0048_servicelevel_min_weight_servicelevel_transit_days_and_more.py
+-rw-rw-r--  2.0 unx     1853 b- defN 23-Apr-18 09:48 karrio/server/providers/migrations/0048_servicelevel_min_weight_servicelevel_transit_days_and_more.py
+-rw-rw-r--  2.0 unx     5661 b- defN 23-Apr-18 05:48 karrio/server/providers/migrations/0049_boxknightsettings_geodissettings_lapostesettings_and_more.py
+-rw-rw-r--  2.0 unx     3516 b- defN 23-Apr-18 10:22 karrio/server/providers/migrations/0050_carrier_is_system_alter_carrier_metadata_and_more.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-15 19:21 karrio/server/providers/migrations/__init__.py
--rw-rw-r--  2.0 unx      910 b- defN 23-Mar-03 13:50 karrio/server/providers/models/__init__.py
--rw-rw-r--  2.0 unx     6426 b- defN 23-Mar-27 16:49 karrio/server/providers/models/carrier.py
--rw-rw-r--  2.0 unx     1095 b- defN 22-Nov-15 19:21 karrio/server/providers/models/template.py
+-rw-rw-r--  2.0 unx     1024 b- defN 23-Apr-15 06:44 karrio/server/providers/models/__init__.py
+-rw-rw-r--  2.0 unx     6753 b- defN 23-Apr-18 09:34 karrio/server/providers/models/carrier.py
+-rw-rw-r--  2.0 unx      760 b- defN 23-Apr-15 07:36 karrio/server/providers/models/config.py
+-rw-rw-r--  2.0 unx     2054 b- defN 23-Apr-15 06:44 karrio/server/providers/models/service.py
+-rw-rw-r--  2.0 unx     1109 b- defN 23-Apr-15 06:44 karrio/server/providers/models/template.py
 -rw-rw-r--  2.0 unx       90 b- defN 22-Nov-15 19:21 karrio/server/serializers/__init__.py
--rw-rw-r--  2.0 unx    12154 b- defN 23-Mar-29 01:29 karrio/server/serializers/abstract.py
+-rw-rw-r--  2.0 unx    12222 b- defN 23-Apr-16 10:02 karrio/server/serializers/abstract.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-15 19:21 karrio/server/tracing/__init__.py
 -rw-rw-r--  2.0 unx     1904 b- defN 23-Mar-06 05:06 karrio/server/tracing/admin.py
 -rw-rw-r--  2.0 unx      247 b- defN 22-Nov-15 19:21 karrio/server/tracing/apps.py
 -rw-rw-r--  2.0 unx     2056 b- defN 23-Mar-03 13:50 karrio/server/tracing/models.py
 -rw-rw-r--  2.0 unx       60 b- defN 22-Nov-15 19:21 karrio/server/tracing/tests.py
 -rw-rw-r--  2.0 unx     2868 b- defN 23-Mar-03 13:50 karrio/server/tracing/utils.py
 -rw-rw-r--  2.0 unx     1921 b- defN 22-Nov-15 19:21 karrio/server/tracing/migrations/0001_initial.py
@@ -156,12 +165,12 @@
 -rw-rw-r--  2.0 unx      992 b- defN 22-Nov-15 19:21 karrio/server/user/migrations/0002_token.py
 -rw-rw-r--  2.0 unx      498 b- defN 22-Nov-15 19:21 karrio/server/user/migrations/0003_token_test_mode.py
 -rw-rw-r--  2.0 unx      791 b- defN 22-Nov-15 19:21 karrio/server/user/migrations/0004_group.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-15 19:21 karrio/server/user/migrations/__init__.py
 -rw-rw-r--  2.0 unx     3690 b- defN 22-Nov-15 19:21 karrio/server/user/templates/registration/login.html
 -rw-rw-r--  2.0 unx      247 b- defN 22-Nov-15 19:21 karrio/server/user/templates/registration/registration_confirm_email.html
 -rw-rw-r--  2.0 unx       94 b- defN 22-Nov-15 19:21 karrio/server/user/templates/registration/registration_confirm_email.txt
--rw-rw-r--  2.0 unx      773 b- defN 23-Mar-29 13:38 karrio.server.core-2023.3.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Mar-29 13:38 karrio.server.core-2023.3.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx        7 b- defN 23-Mar-29 13:38 karrio.server.core-2023.3.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    17143 b- defN 23-Mar-29 13:38 karrio.server.core-2023.3.4.dist-info/RECORD
-165 files, 432466 bytes uncompressed, 109788 bytes compressed:  74.6%
+-rw-rw-r--  2.0 unx      771 b- defN 23-Apr-18 10:32 karrio.server.core-2023.4.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Apr-18 10:32 karrio.server.core-2023.4.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        7 b- defN 23-Apr-18 10:32 karrio.server.core-2023.4.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    18173 b- defN 23-Apr-18 10:32 karrio.server.core-2023.4.dist-info/RECORD
+174 files, 458382 bytes uncompressed, 116236 bytes compressed:  74.6%
```

## zipnote {}

```diff
@@ -153,14 +153,17 @@
 
 Filename: karrio/server/providers/extension/models/aramex.py
 Comment: 
 
 Filename: karrio/server/providers/extension/models/australiapost.py
 Comment: 
 
+Filename: karrio/server/providers/extension/models/boxknight.py
+Comment: 
+
 Filename: karrio/server/providers/extension/models/canadapost.py
 Comment: 
 
 Filename: karrio/server/providers/extension/models/canpar.py
 Comment: 
 
 Filename: karrio/server/providers/extension/models/chronopost.py
@@ -195,17 +198,29 @@
 
 Filename: karrio/server/providers/extension/models/freightcom.py
 Comment: 
 
 Filename: karrio/server/providers/extension/models/generic.py
 Comment: 
 
+Filename: karrio/server/providers/extension/models/geodis.py
+Comment: 
+
+Filename: karrio/server/providers/extension/models/laposte.py
+Comment: 
+
+Filename: karrio/server/providers/extension/models/nationex.py
+Comment: 
+
 Filename: karrio/server/providers/extension/models/purolator.py
 Comment: 
 
+Filename: karrio/server/providers/extension/models/roadie.py
+Comment: 
+
 Filename: karrio/server/providers/extension/models/royalmail.py
 Comment: 
 
 Filename: karrio/server/providers/extension/models/sendle.py
 Comment: 
 
 Filename: karrio/server/providers/extension/models/sf_express.py
@@ -372,23 +387,35 @@
 
 Filename: karrio/server/providers/migrations/0047_dpdsettings.py
 Comment: 
 
 Filename: karrio/server/providers/migrations/0048_servicelevel_min_weight_servicelevel_transit_days_and_more.py
 Comment: 
 
+Filename: karrio/server/providers/migrations/0049_boxknightsettings_geodissettings_lapostesettings_and_more.py
+Comment: 
+
+Filename: karrio/server/providers/migrations/0050_carrier_is_system_alter_carrier_metadata_and_more.py
+Comment: 
+
 Filename: karrio/server/providers/migrations/__init__.py
 Comment: 
 
 Filename: karrio/server/providers/models/__init__.py
 Comment: 
 
 Filename: karrio/server/providers/models/carrier.py
 Comment: 
 
+Filename: karrio/server/providers/models/config.py
+Comment: 
+
+Filename: karrio/server/providers/models/service.py
+Comment: 
+
 Filename: karrio/server/providers/models/template.py
 Comment: 
 
 Filename: karrio/server/serializers/__init__.py
 Comment: 
 
 Filename: karrio/server/serializers/abstract.py
@@ -477,20 +504,20 @@
 
 Filename: karrio/server/user/templates/registration/registration_confirm_email.html
 Comment: 
 
 Filename: karrio/server/user/templates/registration/registration_confirm_email.txt
 Comment: 
 
-Filename: karrio.server.core-2023.3.4.dist-info/METADATA
+Filename: karrio.server.core-2023.4.dist-info/METADATA
 Comment: 
 
-Filename: karrio.server.core-2023.3.4.dist-info/WHEEL
+Filename: karrio.server.core-2023.4.dist-info/WHEEL
 Comment: 
 
-Filename: karrio.server.core-2023.3.4.dist-info/top_level.txt
+Filename: karrio.server.core-2023.4.dist-info/top_level.txt
 Comment: 
 
-Filename: karrio.server.core-2023.3.4.dist-info/RECORD
+Filename: karrio.server.core-2023.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## karrio/server/core/datatypes.py

```diff
@@ -1,10 +1,11 @@
 import attr
-from typing import List, Dict
-from jstruct import JStruct, JList, REQUIRED
+import typing
+import jstruct
+import karrio.core.units as units
 from karrio.core.models import (
     DocumentDetails,
     Documents,
     Parcel,
     Message,
     Address as BaseAddress,
     TrackingRequest as BaseTrackingRequest,
@@ -24,14 +25,22 @@
     TrackingDetails,
     TrackingInfo,
     DocumentFile,
     DocumentUploadRequest,
 )
 
 
+COUNTRIES = [(c.name, c.name) for c in units.Country]
+CURRENCIES = [(c.name, c.name) for c in units.Currency]
+WEIGHT_UNITS = [(c.name, c.name) for c in units.WeightUnit]
+DIMENSION_UNITS = [(c.name, c.name) for c in units.DimensionUnit]
+CAPABILITIES_CHOICES = [(c, c) for c in units.CarrierCapabilities.get_capabilities()]
+LABEL_TYPES = [(c.name, c.name) for c in list(units.LabelType)]
+
+
 class CarrierSettings:
     def __init__(
         self,
         carrier_name: str,
         carrier_id: str,
         test_mode: bool = None,
         active: bool = None,
@@ -96,221 +105,221 @@
     address_line1: str = ""
     address_line2: str = ""
 
     federal_tax_id: str = None
     state_tax_id: str = None
 
     validate_location: bool = None
-    validation: JStruct[AddressValidation] = None
+    validation: jstruct.JStruct[AddressValidation] = None
 
 
 @attr.s(auto_attribs=True)
 class PickupRequest(BasePickupRequest):
     pickup_date: str
     ready_time: str
     closing_time: str
-    address: Address = JStruct[Address, REQUIRED]
+    address: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
 
-    parcels: List[Parcel] = JList[Parcel]
+    parcels: typing.List[Parcel] = jstruct.JList[Parcel]
     instruction: str = None
     package_location: str = None
-    options: Dict = {}
+    options: typing.Dict = {}
 
 
 @attr.s(auto_attribs=True)
 class PickupUpdateRequest(BasePickupUpdateRequest):
     confirmation_number: str
     pickup_date: str
     ready_time: str
     closing_time: str
-    address: Address = JStruct[Address, REQUIRED]
+    address: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
 
-    parcels: List[Parcel] = JList[Parcel]
+    parcels: typing.List[Parcel] = jstruct.JList[Parcel]
     instruction: str = None
     package_location: str = None
-    options: Dict = {}
+    options: typing.Dict = {}
 
 
 @attr.s(auto_attribs=True)
 class PickupCancelRequest(BasePickupCancelRequest):
     confirmation_number: str
 
-    address: Address = JStruct[Address]
+    address: Address = jstruct.JStruct[Address]
     pickup_date: str = None
     reason: str = None
 
 
 @attr.s(auto_attribs=True)
 class Rate:
     carrier_name: str
     carrier_id: str
 
     currency: str = None
     transit_days: int = None
     service: str = None
     total_charge: float = 0.0
-    extra_charges: List[ChargeDetails] = []
+    extra_charges: typing.List[ChargeDetails] = []
     id: str = None
     meta: dict = None
     test_mode: bool = None
     object_type: str = "rate"
 
 
 @attr.s(auto_attribs=True)
 class RateRequest(BaseRateRequest):
-    shipper: Address = JStruct[Address, REQUIRED]
-    recipient: Address = JStruct[Address, REQUIRED]
-    parcels: List[Parcel] = JList[Parcel, REQUIRED]
+    shipper: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
+    recipient: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
+    parcels: typing.List[Parcel] = jstruct.JList[Parcel, jstruct.REQUIRED]
 
-    services: List[str] = []
-    options: Dict = {}
+    services: typing.List[str] = []
+    options: typing.Dict = {}
     reference: str = ""
 
-    carrier_ids: List[str] = []
+    carrier_ids: typing.List[str] = []
 
 
 @attr.s(auto_attribs=True)
 class ShipmentRequest(BaseShipmentRequest):
     service: str
     selected_rate_id: str  # type: ignore
 
-    shipper: Address = JStruct[Address, REQUIRED]
-    recipient: Address = JStruct[Address, REQUIRED]
-    parcels: List[Parcel] = JList[Parcel, REQUIRED]
-    rates: List[Rate] = JList[Rate, REQUIRED]
-
-    payment: Payment = JStruct[Payment]
-    customs: Customs = JStruct[Customs]
-    billing_address: Address = JStruct[Address]
+    shipper: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
+    recipient: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
+    parcels: typing.List[Parcel] = jstruct.JList[Parcel, jstruct.REQUIRED]
+    rates: typing.List[Rate] = jstruct.JList[Rate, jstruct.REQUIRED]
+
+    payment: Payment = jstruct.JStruct[Payment]
+    customs: Customs = jstruct.JStruct[Customs]
+    billing_address: Address = jstruct.JStruct[Address]
 
-    options: Dict = {}
+    options: typing.Dict = {}
     reference: str = ""
     label_type: str = None
     id: str = None
 
-    metadata: Dict = {}
+    metadata: typing.Dict = {}
 
 
 @attr.s(auto_attribs=True)
 class Shipment:
     carrier_id: str
     carrier_name: str
     tracking_number: str
     shipment_identifier: str
     service: str
     selected_rate_id: str
 
-    shipper: Address = JStruct[Address, REQUIRED]
-    recipient: Address = JStruct[Address, REQUIRED]
-    parcels: List[Parcel] = JList[Parcel, REQUIRED]
-    rates: List[Rate] = JList[Rate, REQUIRED]
-    selected_rate: Rate = JStruct[Rate, REQUIRED]
-    docs: Documents = JStruct[Documents, REQUIRED]
-
-    payment: Payment = JStruct[Payment]
-    customs: Customs = JStruct[Customs]
-    billing_address: Address = JStruct[Address]
+    shipper: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
+    recipient: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
+    parcels: typing.List[Parcel] = jstruct.JList[Parcel, jstruct.REQUIRED]
+    rates: typing.List[Rate] = jstruct.JList[Rate, jstruct.REQUIRED]
+    selected_rate: Rate = jstruct.JStruct[Rate, jstruct.REQUIRED]
+    docs: Documents = jstruct.JStruct[Documents, jstruct.REQUIRED]
+
+    payment: Payment = jstruct.JStruct[Payment]
+    customs: Customs = jstruct.JStruct[Customs]
+    billing_address: Address = jstruct.JStruct[Address]
 
-    options: Dict = {}
+    options: typing.Dict = {}
     reference: str = ""
     label_type: str = None
     tracking_url: str = None
     tracker_id: str = None
     status: str = ""
     meta: dict = {}
     id: str = None
 
-    metadata: Dict = {}
+    metadata: typing.Dict = {}
     created_at: str = None
     test_mode: bool = None
-    messages: List[Message] = JList[Message]
+    messages: typing.List[Message] = jstruct.JList[Message]
 
 
 @attr.s(auto_attribs=True)
 class Pickup:
     carrier_id: str
     carrier_name: str
 
     pickup_date: str
     ready_time: str
     closing_time: str
     confirmation_number: str
-    address: Address = JStruct[Address, REQUIRED]
-    parcels: List[Parcel] = JList[Parcel, REQUIRED]
+    address: Address = jstruct.JStruct[Address, jstruct.REQUIRED]
+    parcels: typing.List[Parcel] = jstruct.JList[Parcel, jstruct.REQUIRED]
 
-    pickup_charge: ChargeDetails = JStruct[ChargeDetails]
+    pickup_charge: ChargeDetails = jstruct.JStruct[ChargeDetails]
     instruction: str = None
     package_location: str = None
-    options: Dict = {}
+    options: typing.Dict = {}
     id: str = None
     test_mode: bool = None
 
 
 @attr.s(auto_attribs=True)
 class TrackingRequest(BaseTrackingRequest):
-    tracking_numbers: List[str]
+    tracking_numbers: typing.List[str]
     account_numer: str = None
     reference: str = None
-    options: Dict = {}
-    info: TrackingInfo = JStruct[TrackingInfo]
+    options: typing.Dict = {}
+    info: TrackingInfo = jstruct.JStruct[TrackingInfo]
 
 
 @attr.s(auto_attribs=True)
 class Tracking:
     carrier_name: str
     carrier_id: str
     tracking_number: str
-    events: List[TrackingEvent] = JList[TrackingEvent]
+    events: typing.List[TrackingEvent] = jstruct.JList[TrackingEvent]
 
     status: str = "unknown"
     info: TrackingInfo = None
     estimated_delivery: str = None
     delivered: bool = None
     test_mode: bool = None
-    options: Dict = {}
+    options: typing.Dict = {}
     meta: dict = None
     id: str = None
 
 
 @attr.s(auto_attribs=True)
 class DocumentUploadResponse:
     carrier_name: str
     carrier_id: str
-    documents: List[DocumentDetails] = JList[DocumentDetails]
+    documents: typing.List[DocumentDetails] = jstruct.JList[DocumentDetails]
     reference: str = ""
 
     test_mode: bool = None
-    options: Dict = {}
+    options: typing.Dict = {}
     meta: dict = None
     id: str = None
-    messages: List[Message] = JList[Message]
+    messages: typing.List[Message] = jstruct.JList[Message]
 
 
 @attr.s(auto_attribs=True)
 class ConfirmationResponse:
-    messages: List[Message] = JList[Message]
-    confirmation: Confirmation = JStruct[Confirmation]
+    messages: typing.List[Message] = jstruct.JList[Message]
+    confirmation: Confirmation = jstruct.JStruct[Confirmation]
 
 
 @attr.s(auto_attribs=True)
 class PickupResponse:
-    messages: List[Message] = JList[Message]
-    pickup: Pickup = JStruct[Pickup]
+    messages: typing.List[Message] = jstruct.JList[Message]
+    pickup: Pickup = jstruct.JStruct[Pickup]
 
 
 @attr.s(auto_attribs=True)
 class RateResponse:
-    messages: List[Message] = JList[Message]
-    rates: List[Rate] = JList[Rate]
+    messages: typing.List[Message] = jstruct.JList[Message]
+    rates: typing.List[Rate] = jstruct.JList[Rate]
 
 
 @attr.s(auto_attribs=True)
 class TrackingResponse:
-    messages: List[Message] = JList[Message]
-    tracking: Tracking = JStruct[Tracking]
+    messages: typing.List[Message] = jstruct.JList[Message]
+    tracking: Tracking = jstruct.JStruct[Tracking]
 
 
 @attr.s(auto_attribs=True)
 class Error:
     message: str = None
     code: str = None
-    details: Dict = None
+    details: typing.Dict = None
```

## karrio/server/core/dataunits.py

```diff
@@ -67,22 +67,36 @@
         **{
             k: v
             for k, v in REFERENCE_MODELS.items()
             if k not in (REFERENCE_EXCLUSIONS if reduced else [])
         },
     }
 
-    if is_authenticated and "generic" in providers.MODELS:
+    def _get_generic_carriers():
+        system_custom_carriers = [
+            c.settings
+            for c in gateway.Carriers.list(system_only=True, carrier_name="generic")
+        ]
         custom_carriers = [
             c.settings
-            for c in gateway.Carriers.list(context=request, carrier_name="generic")
+            for c in (
+                gateway.Carriers.list(context=request, carrier_name="generic").exclude(
+                    is_system=True
+                )
+                if is_authenticated
+                else []
+            )
         ]
+
         extra_carriers = {
             c.custom_carrier_name: c.display_name for c in custom_carriers
         }
+        system_carriers = {
+            c.custom_carrier_name: c.display_name for c in system_custom_carriers
+        }
         extra_services = {
             c.custom_carrier_name: {
                 s.service_code: s.service_code for s in c.services.all()
             }
             for c in custom_carriers
         }
         extra_service_names = {
@@ -90,12 +104,16 @@
             for name, value in extra_services.items()
         }
 
         references.update(
             dict(
                 custom_carriers=extra_carriers,
                 services={**references["services"], **extra_services},
+                carriers={**references["carriers"], **system_carriers},
                 service_names={**references["service_names"], **extra_service_names},
             )
         )
 
+    if request is not None and "generic" in providers.MODELS:
+        _get_generic_carriers()
+
     return references
```

## karrio/server/core/filters.py

```diff
@@ -7,45 +7,55 @@
 import karrio.server.tracing.models as tracing
 import karrio.server.core.models as core
 import karrio.server.filters as filters
 import karrio.server.openapi as openapi
 
 
 class CarrierFilters(filters.FilterSet):
-
-    carrier_name = filters.MultipleChoiceFilter(
-        method="carrier_filter",
-        choices=[(c, c) for c in dataunits.CARRIER_NAMES],
+    carrier_name = filters.CharFilter(
         help_text=f"""
         carrier_name used to fulfill the shipment
         Values: {', '.join([f"`{c}`" for c in dataunits.CARRIER_NAMES])}
         """,
     )
     active = filters.BooleanFilter(
         help_text="This flag indicates whether to return active carriers only",
     )
     system_only = filters.BooleanFilter(
-        required=False,
-        default=False,
         help_text="This flag indicates that only system carriers should be returned",
     )
 
     parameters = [
         openapi.OpenApiParameter(
+            "carrier_name",
+            type=openapi.OpenApiTypes.STR,
+            location=openapi.OpenApiParameter.QUERY,
+            description=(
+                "The unique carrier slug. <br/>"
+                f"Values: {', '.join([f'`{c}`' for c in dataunits.CARRIER_NAMES])}"
+            ),
+        ),
+        openapi.OpenApiParameter(
             "active",
             type=openapi.OpenApiTypes.BOOL,
             location=openapi.OpenApiParameter.QUERY,
         ),
         openapi.OpenApiParameter(
             "system_only",
             type=openapi.OpenApiTypes.BOOL,
             location=openapi.OpenApiParameter.QUERY,
         ),
     ]
 
+    class Meta:
+        import karrio.server.providers.models as providers
+
+        model = providers.Carrier
+        fields: typing.List[str] = []
+
 
 class ShipmentFilters(filters.FilterSet):
     address = filters.CharFilter(
         method="address_filter",
         help_text="shipment recipient address line",
     )
     created_after = filters.DateTimeFilter(
```

## karrio/server/core/gateway.py

```diff
@@ -26,68 +26,72 @@
 
 class Carriers:
     @staticmethod
     def list(context=None, **kwargs) -> typing.List[providers.Carrier]:
         query: typing.Any = tuple()
         list_filter = kwargs.copy()
         user_filter = core.get_access_filter(context) if context is not None else []
+
         test_mode = list_filter.get("test_mode") or getattr(context, "test_mode", None)
+        system_only = list_filter.get("system_only") is True
         active_key = (
             "active_orgs__id" if settings.MULTI_ORGANIZATIONS else "active_users__id"
         )
-        access_entity = getattr(
-            context, "org" if settings.MULTI_ORGANIZATIONS else "user", None
-        )
-        access_id = getattr(access_entity, "id", None)
-        system_carrier_user = (
-            Q(**{"active": True, "created_by__isnull": True, active_key: access_id})
-            if access_id is not None
-            else Q(**{"active": True, "created_by__isnull": True})
+        access_id = getattr(
+            getattr(context, "org" if settings.MULTI_ORGANIZATIONS else "user", None),
+            "id",
+            None,
         )
         creator_filter = (
             Q(
                 created_by__id=context.user.id,
                 **(dict(org=None) if settings.MULTI_ORGANIZATIONS else {}),
             )
             if getattr(context, "user", None) is not None
             else Q()
         )
 
-        # Check if the system_only flag is not specified and there is a provided user, get the users carriers
-        if (not list_filter.get("system_only")) and (len(user_filter) > 0):
-            query += (user_filter | system_carrier_user | creator_filter,)
-        elif list_filter.get("system_only") is True:
-            query += (Q(created_by__isnull=True, active=True),)
+        _user_carriers = providers.Carrier.user_carriers.filter(
+            user_filter if len(user_filter) > 0 else Q(),
+            creator_filter,
+        )
+        _system_carriers = providers.Carrier.system_carriers.filter(
+            Q(
+                **{
+                    "active": True,
+                    **({active_key: access_id} if access_id is not None else {}),
+                }
+            )
+        )
+        _queryset = (
+            _system_carriers if system_only else _user_carriers | _system_carriers
+        )
 
         # Check if the test filter is specified then set it otherwise return all carriers live and test mode
         if test_mode is not None:
-            query += (Q(test_mode=test_mode),)
+            _queryset = _queryset.filter(test_mode=test_mode)
 
         # Check if the active flag is specified and return all active carrier is active is not set to false
         if list_filter.get("active") is not None:
             active = False if list_filter["active"] is False else True
-            carrier_is_active = Q(active=active, created_by__isnull=False)
-            system_carrier_is_active = (
-                system_carrier_user
-                if active
-                else Q(active=active, created_by__isnull=True)
-            )
-            query += (carrier_is_active | system_carrier_is_active,)
+            _queryset = _queryset.filter(Q(active=active))
 
         # Check if a specific carrier_id is provided, to add it to the query
         if "carrier_id" in list_filter:
-            query += (Q(carrier_id=list_filter["carrier_id"]),)
+            _queryset = _queryset.filter(carrier_id=list_filter["carrier_id"])
 
         # Check if a specific carrier_id is provided, to add it to the query
         if "capability" in list_filter:
-            query += (Q(capabilities__icontains=list_filter["capability"]),)
+            _queryset = _queryset.filter(
+                capabilities__icontains=list_filter["capability"]
+            )
 
         # Check if a list of carrier_ids are provided, to add the list to the query
         if any(list_filter.get("carrier_ids", [])):
-            query += (Q(carrier_id__in=list_filter["carrier_ids"]),)
+            _queryset = _queryset.filter(carrier_id__in=list_filter["carrier_ids"])
 
         if any(list_filter.get("services", [])):
             carrier_names = [
                 name
                 for name, services in dataunits.contextual_reference(context)[
                     "services"
                 ].items()
@@ -105,27 +109,29 @@
                 for carrier_name in carrier_names[1:]:
                     _queries |= (
                         Q(**{f"{carrier_name.replace('_', '')}settings__isnull": False})
                         if carrier_name in providers.MODELS.keys()
                         else Q(genericsettings__custom_carrier_name=carrier_name)
                     )
 
-                query += (_queries,)
+                _queryset = _queryset.filter(_queries)
 
         if "carrier_name" in list_filter:
             carrier_name = list_filter["carrier_name"]
 
             if carrier_name not in providers.MODELS.keys():
                 raise NotFound(
                     f"No extension installed for the carrier: '{carrier_name}'"
                 )
 
-            query += (Q(**{f"{carrier_name.replace('_', '')}settings__isnull": False}),)
+            _queryset = _queryset.filter(
+                Q(**{f"{carrier_name.replace('_', '')}settings__isnull": False})
+            )
 
-        carriers = providers.Carrier.objects.filter(*query)
+        carriers = _queryset.distinct()
 
         # Raise an error if no carrier is found
         if list_filter.get("raise_not_found") and len(carriers) == 0:
             raise NotFound("No active carrier connection found to process the request")
 
         return carriers
```

## karrio/server/core/serializers.py

```diff
@@ -11,14 +11,17 @@
 class ShipmentStatus(enum.Enum):
     draft = "draft"
     purchased = "purchased"
     cancelled = "cancelled"
     shipped = "shipped"
     in_transit = "in_transit"
     delivered = "delivered"
+    needs_attention = "needs_attention"
+    out_for_delivery = "out_for_delivery"
+    delivery_failed = "delivery_failed"
 
 
 class TrackerStatus(enum.Enum):
     pending = "pending"
     unknown = "unknown"
     delivered = "delivered"
     on_hold = "on_hold"
@@ -73,14 +76,20 @@
         help_text="The active flag indicates whether the carrier account is active or not.",
     )
     capabilities = serializers.StringListField(
         required=False,
         allow_null=True,
         help_text="""The carrier supported and enabled capabilities.""",
     )
+    metadata = serializers.PlainDictField(
+        required=False, default={}, help_text="The carrier user metadata."
+    )
+    config = serializers.PlainDictField(
+        required=False, default={}, help_text="The carrier connection config."
+    )
 
 
 class APIError(serializers.Serializer):
     message = serializers.CharField(
         required=False, help_text="The error or warning message"
     )
     code = serializers.CharField(required=False, help_text="The message code")
@@ -609,21 +618,39 @@
         help_text="""<details>
         <summary>The options available for the shipment.</summary>
 
         {
             "currency": "USD",
             "insurance": 100.00,
             "cash_on_delivery": 30.00,
-            "shipment_date": "2020-01-01",
             "dangerous_good": true,
             "declared_value": 150.00,
+            "sms_notification": true,
             "email_notification": true,
             "email_notification_to": "shipper@mail.com",
-            "signature_confirmation": true,
+            "hold_at_location": true,
+            "paperless_trade": true,
             "preferred_service": "fedex_express_saver",
+            "shipment_date": "2020-01-01",
+            "shipment_note": "This is a shipment note",
+            "signature_confirmation": true,
+            "doc_files": [
+                {
+                    "doc_type": "commercial_invoice",
+                    "doc_file": "base64 encoded file",
+                    "doc_name": "commercial_invoice.pdf",
+                    "doc_format": "pdf",
+                }
+            ],
+            "doc_references": [
+                {
+                    "doc_id": "123456789",
+                    "doc_type": "commercial_invoice",
+                }
+            ],
         }
         """,
     )
     reference = serializers.CharField(
         required=False,
         allow_blank=True,
         allow_null=True,
@@ -675,15 +702,15 @@
     )
     shipment_origin_country = serializers.CharField(
         required=False, allow_null=True, help_text="The shipment origin country"
     )
     shipment_origin_postal_code = serializers.CharField(
         required=False, allow_null=True, help_text="The shipment origin postal code"
     )
-    shipment_destication_country = serializers.CharField(
+    shipment_destination_country = serializers.CharField(
         required=False, allow_null=True, help_text="The shipment destination country"
     )
     shipment_destination_postal_code = serializers.CharField(
         required=False,
         allow_null=True,
         help_text="The shipment destination postal code",
     )
@@ -1110,21 +1137,39 @@
         help_text="""<details>
         <summary>The options available for the shipment.</summary>
 
         {
             "currency": "USD",
             "insurance": 100.00,
             "cash_on_delivery": 30.00,
-            "shipment_date": "2020-01-01",
             "dangerous_good": true,
             "declared_value": 150.00,
+            "sms_notification": true,
             "email_notification": true,
             "email_notification_to": "shipper@mail.com",
-            "signature_confirmation": true,
+            "hold_at_location": true,
+            "paperless_trade": true,
             "preferred_service": "fedex_express_saver",
+            "shipment_date": "2020-01-01",
+            "shipment_note": "This is a shipment note",
+            "signature_confirmation": true,
+            "doc_files": [
+                {
+                    "doc_type": "commercial_invoice",
+                    "doc_file": "base64 encoded file",
+                    "doc_name": "commercial_invoice.pdf",
+                    "doc_format": "pdf",
+                }
+            ],
+            "doc_references": [
+                {
+                    "doc_id": "123456789",
+                    "doc_type": "commercial_invoice",
+                }
+            ],
         }
         """,
     )
     payment = Payment(required=False, default={}, help_text="The payment details")
     billing_address = AddressData(
         required=False, allow_null=True, help_text="The payor address."
     )
@@ -1312,21 +1357,39 @@
         help_text="""<details>
         <summary>The options available for the shipment.</summary>
 
         {
             "currency": "USD",
             "insurance": 100.00,
             "cash_on_delivery": 30.00,
-            "shipment_date": "2020-01-01",
             "dangerous_good": true,
             "declared_value": 150.00,
+            "sms_notification": true,
             "email_notification": true,
             "email_notification_to": "shipper@mail.com",
-            "signature_confirmation": true,
+            "hold_at_location": true,
+            "paperless_trade": true,
             "preferred_service": "fedex_express_saver",
+            "shipment_date": "2020-01-01",
+            "shipment_note": "This is a shipment note",
+            "signature_confirmation": true,
+            "doc_files": [
+                {
+                    "doc_type": "commercial_invoice",
+                    "doc_file": "base64 encoded file",
+                    "doc_name": "commercial_invoice.pdf",
+                    "doc_format": "pdf",
+                }
+            ],
+            "doc_references": [
+                {
+                    "doc_id": "123456789",
+                    "doc_type": "commercial_invoice",
+                }
+            ],
         }
         """,
     )
     payment = Payment(required=False, default={}, help_text="The payment details")
     billing_address = Address(
         required=False, allow_null=True, help_text="The payor address."
     )
```

## karrio/server/core/migrations/0002_apilogindex.py

```diff
@@ -5,16 +5,17 @@
 import karrio.server.core.utils as utils
 
 
 def forwards_func(apps, schema_editor):
     db_alias = schema_editor.connection.alias
     APILog = apps.get_model("core", "APILog")
     APILogIndex = apps.get_model("core", "APILogIndex")
+    logs = APILog.objects.using(db_alias).filter(response__isnull=False).iterator()
 
-    for log in APILog.objects.using(db_alias).filter(response__isnull=False):
+    for log in logs:
         response = utils.failsafe(
             lambda: utils.DP.to_dict(utils.DP.to_dict(log.response))
         )
         entity_id = utils.failsafe(lambda: response["id"])
 
         if entity_id is not None:
             _index = APILogIndex(
@@ -29,15 +30,14 @@
 
 
 def reverse_func(apps, schema_editor):
     pass
 
 
 class Migration(migrations.Migration):
-
     dependencies = [
         ("rest_framework_tracking", "0011_auto_20201117_2016"),
         ("core", "0001_initial"),
     ]
 
     operations = [
         migrations.CreateModel(
```

## karrio/server/core/migrations/0003_apilogindex_test_mode.py

```diff
@@ -5,16 +5,18 @@
 import karrio.lib as lib
 
 
 def forwards_func(apps, schema_editor):
     db_alias = schema_editor.connection.alias
     APILog = apps.get_model("core", "APILog")
     APILogIndex = apps.get_model("core", "APILogIndex")
-    logs = APILog.objects.using(db_alias).filter(
-        models.Q(response__icontains="test_mode")
+    logs = (
+        APILog.objects.using(db_alias)
+        .filter(models.Q(response__icontains="test_mode"))
+        .iterator()
     )
 
     for log in logs:
         response = utils.failsafe(lambda: lib.to_dict(lib.to_dict(log.response)))
         entity_id = utils.failsafe(lambda: response["id"])
         test_mode = utils.failsafe(lambda: response["test_mode"])
 
@@ -40,15 +42,14 @@
 
 
 def reverse_func(apps, schema_editor):
     pass
 
 
 class Migration(migrations.Migration):
-
     dependencies = [
         ("core", "0002_apilogindex"),
     ]
 
     operations = [
         migrations.AddField(
             model_name="apilogindex",
```

## karrio/server/core/models/__init__.py

```diff
@@ -1,9 +1,10 @@
-import functools
 import typing
+import functools
+
 from karrio.server.core.models.base import (
     ControlledAccessModel,
     get_access_filter,
     register_model,
     uuid,
 )
 from karrio.server.core.models.third_party import (
```

## karrio/server/core/models/base.py

```diff
@@ -17,15 +17,15 @@
 
 def uuid(prefix: str = None):
     return f'{prefix or ""}{uuid4().hex}'
 
 
 class ControlledAccessModel:
     @classmethod
-    def access_by(cls, context):
+    def access_by(cls: models.Model, context, manager: str = "objects"):
         test_mode = (
             context.get("test_mode")
             if isinstance(context, dict)
             else getattr(context, "test_mode", None)
         )
 
         if hasattr(cls, "created_by"):
@@ -38,15 +38,17 @@
         query = get_access_filter(context, key)
 
         if hasattr(cls, "test_mode") and test_mode is not None:
             query = query & models.Q(
                 models.Q(test_mode=context.test_mode) | models.Q(test_mode__isnull=True)
             )
 
-        return cls.objects.filter(query)
+        queryset = getattr(cls, manager, cls.objects)
+
+        return queryset.filter(query)
 
 
 def register_model(model: T) -> T:
     transform = lambda model, transformer: (
         model if transformer is None else pydoc.locate(transformer)(model)
     )
```

## karrio/server/core/views/references.py

```diff
@@ -1,7 +1,8 @@
+import yaml  # type: ignore
 from rest_framework import status
 from rest_framework.decorators import api_view, renderer_classes, permission_classes
 from rest_framework.permissions import AllowAny
 from rest_framework.response import Response
 from rest_framework.request import Request
 from rest_framework.renderers import JSONRenderer
 from django.urls import path
@@ -31,14 +32,15 @@
                 "countries": {},
                 "currencies": {},
                 "carriers": {},
                 "customs_content_type": {},
                 "incoterms": {},
                 "states": {},
                 "services": {},
+                "connection_configs": {},
                 "service_names": {},
                 "options": {},
                 "option_names": {},
                 "package_presets": {},
                 "packaging_types": {},
                 "payment_types": {},
                 "carrier_capabilities": {},
@@ -58,15 +60,20 @@
     responses={200: References},
 )
 @api_view(["GET"])
 @permission_classes([AllowAny])
 @renderer_classes([JSONRenderer])
 def references(request: Request):
     try:
-        return Response(dataunits.contextual_reference(), status=status.HTTP_200_OK)
+        reduced = bool(yaml.safe_load(request.query_params.get("reduced", "true")))
+
+        return Response(
+            dataunits.contextual_reference(reduced=reduced),
+            status=status.HTTP_200_OK,
+        )
     except Exception as e:
         import logging
 
         logging.exception(e)
         raise e
```

## karrio/server/filters/abstract.py

```diff
@@ -1,8 +1,9 @@
 import django_filters
+import karrio.lib as lib
 
 
 class CharInFilter(django_filters.BaseInFilter, django_filters.CharFilter):
     pass
 
 
 class FilterSet(django_filters.FilterSet):
@@ -15,7 +16,11 @@
                     if self.base_filters.get(key).__class__ == CharInFilter
                     else val
                 )
                 for key, val in data.items()
             },
         }
         super().__init__(data, queryset, request=request, prefix=prefix)
+
+    def to_dict(self):
+        self.form.is_valid()
+        return lib.to_dict(self.form.cleaned_data)
```

## karrio/server/providers/admin.py

```diff
@@ -1,25 +1,146 @@
 import functools
 from django import forms
 from django.db import models
 from django.contrib import admin
 from django.conf import settings
 from django.contrib.auth import get_user_model
+from django.utils.translation import gettext_lazy as _
 
 import karrio.references as ref
+import karrio.server.serializers as serializers
 import karrio.server.providers.models as carriers
 
 User = get_user_model()
+SUPPORTED_CONNECTION_CONFIGS = [
+    "cost_center",
+    "enforce_zpl",
+    "default_currency",
+    "language_code",
+    "label_type",
+    "shipping_options",
+    "shipping_services",
+]
 
 
-def model_admin(carrier):
+def model_admin(ext: str, carrier):
+    import karrio.server.core.datatypes as datatypes
+    import karrio.server.core.dataunits as dataunits
+    import karrio.server.graph.serializers as graph_serializers
+
     class_name = carrier.__name__
+    references = dataunits.contextual_reference(reduced=False)
+    connection_configs = [
+        _
+        for _ in (references["connection_configs"].get(ext) or {}).keys()
+        if _ in SUPPORTED_CONNECTION_CONFIGS
+    ]
+    carrier_services = (references["services"].get(ext) or {}).keys()
+    carrier_options = (references["options"].get(ext) or {}).keys()
+
+    class _Form(forms.ModelForm):
+        for key in connection_configs:
+            if key == "cost_center":
+                cost_center = forms.CharField(
+                    required=False,
+                )
+            if key == "language_code":
+                language_code = forms.ChoiceField(
+                    choices=[("en", "EN"), ("fr", "FR")],
+                    widget=forms.Select(attrs={"class": "vTextField"}),
+                    required=False,
+                )
+            if key == "default_currency":
+                default_currency = forms.ChoiceField(
+                    choices=datatypes.CURRENCIES,
+                    widget=forms.Select(attrs={"class": "vTextField"}),
+                    required=False,
+                )
+            if key == "label_type":
+                label_type = forms.ChoiceField(
+                    choices=datatypes.LABEL_TYPES,
+                    widget=forms.Select(attrs={"class": "vTextField"}),
+                    required=False,
+                )
+            if key == "enforce_zpl":
+                enforce_zpl = forms.NullBooleanField(
+                    required=False,
+                )
+            if key == "shipping_services":
+                shipping_services = forms.MultipleChoiceField(
+                    choices=[(_, _) for _ in carrier_services],
+                    widget=forms.SelectMultiple(attrs={"class": "vTextField"}),
+                    required=False,
+                )
+            if key == "shipping_options":
+                shipping_options = forms.MultipleChoiceField(
+                    choices=[(_, _) for _ in carrier_options],
+                    widget=forms.SelectMultiple(attrs={"class": "vTextField"}),
+                    required=False,
+                )
+
+        class Meta:
+            model = carrier
+            fields = "__all__"
+
+        def save(self, commit: bool = True):
+            config_data = {
+                key: self.cleaned_data.get(key) for key in connection_configs
+            }
+            carrier = super(_Form, self).save(commit)
+
+            if any(connection_configs) and commit:
+                config = carriers.Carrier.resolve_config(carrier)
+                graph_serializers.CarrierConfigModelSerializer.map(
+                    instance=config,
+                    context=dict(user=self.request.user),
+                    data={
+                        "carrier": carrier.pk,
+                        "created_by": self.request.user.pk,
+                        "config": serializers.process_dictionaries_mutations(
+                            ["config"], config_data, config
+                        ),
+                    },
+                ).save()
+
+            return carrier
+
+    form_fields = _Form.base_fields.keys()
 
     class _Admin(admin.ModelAdmin):
+        form = _Form
         list_display = ("__str__", "test_mode", "active")
+        fieldsets = [
+            (
+                None,
+                {
+                    "fields": [
+                        _
+                        for _ in form_fields
+                        if _
+                        not in [
+                            *connection_configs,
+                            "active_users",
+                            "services",
+                            "is_system",
+                        ]
+                    ],
+                },
+            ),
+        ]
+        if any(connection_configs):
+            fieldsets += [
+                (  # type: ignore
+                    "Connection Config",
+                    {
+                        "classes": ["collapse"],
+                        "fields": [_ for _ in connection_configs if _ in form_fields],
+                    },
+                ),
+            ]
         exclude = (
             ["active_users", "services"]
             if hasattr(carrier, "services")
             else ["active_users"]
         )
         inlines = []
         formfield_overrides = {
@@ -127,31 +248,36 @@
 
                     return formset
 
             inlines += [ActiveUserInline]
 
         def get_queryset(self, request):
             query = super().get_queryset(request)
-            return query.filter(created_by=None)
+            return query.filter(models.Q(is_system=True) | models.Q(created_by=None))
 
-        def get_form(self, *args, **kwargs):
-            form = super().get_form(*args, **kwargs)
+        def get_form(self, request, *args, **kwargs):
+            form = super(_Admin, self).get_form(request, *args, **kwargs)
+            form.request = request
 
             # Customize capabilities options specific to a carrier.
             carrier_name = next(
                 (k for k, v in carriers.MODELS.items() if v == carrier), None
             )
             raw_capabilities = ref.get_carrier_capabilities(carrier_name)
             form.base_fields["capabilities"].choices = [
                 (c, c) for c in raw_capabilities
             ]
             form.base_fields["capabilities"].initial = raw_capabilities
 
             return form
 
+        def save_model(self, request, obj, form, change):
+            obj.is_system = True
+            return super().save_model(request, obj, form, change)
+
     return type(f"{class_name}Admin", (_Admin,), {})
 
 
 @admin.register(carriers.ServiceLevel)
 class ServiceLevelAdmin(admin.ModelAdmin):
     list_display = ("__str__",)
 
@@ -174,8 +300,8 @@
 @admin.register(carriers.LabelTemplate)
 class LabelTemplateAdmin(admin.ModelAdmin):
     def has_module_permission(self, request):
         return False
 
 
 for name, model in carriers.MODELS.items():
-    admin.site.register(model, model_admin(model))
+    admin.site.register(model, model_admin(name, model))
```

## karrio/server/providers/views.py

```diff
@@ -7,14 +7,15 @@
 from django.core.files.base import ContentFile
 from django_downloadview import VirtualDownloadView
 from rest_framework import status
 from rest_framework.pagination import LimitOffsetPagination
 from rest_framework.request import Request
 from rest_framework.response import Response
 
+import karrio.lib as lib
 from karrio.server.serializers import PaginatedResult
 from karrio.server.core.views.api import GenericAPIView, APIView
 from karrio.server.core.gateway import Carriers
 from karrio.server.core import datatypes, dataunits
 from karrio.server.providers import models
 from karrio.server.core.serializers import (
     CarrierSettings,
@@ -41,18 +42,19 @@
         responses={
             200: CarriersSettingsList(),
             400: ErrorResponse(),
         },
         parameters=filters.CarrierFilters.parameters,
     )
     def get(self, request: Request):
-        """
-        Returns the list of configured carriers
-        """
-        filter = {**request.query_params, "context": request}
+        """Returns the list of configured carriers"""
+        filter = {
+            **filters.CarrierFilters(request.query_params).to_dict(),
+            "context": request,
+        }
 
         carriers = [carrier.data for carrier in Carriers.list(**filter)]
         response = self.paginate_queryset(CarrierSettings(carriers, many=True).data)
         return self.get_paginated_response(response)
 
 
 class CarrierServices(APIView):
```

## karrio/server/providers/extension/models/dicom.py

```diff
@@ -1,20 +1,20 @@
 from django.db import models
 from karrio.server.providers.models.carrier import Carrier
 
 
 class DicomSettings(Carrier):
     class Meta:
         db_table = "dicom-settings"
-        verbose_name = 'Dicom Settings'
-        verbose_name_plural = 'Dicom Settings'
+        verbose_name = "Dicom Settings"
+        verbose_name_plural = "Dicom Settings"
 
-    username = models.CharField(max_length=200)
-    password = models.CharField(max_length=200)
-    billing_account = models.CharField(max_length=200)
+    username = models.CharField(max_length=50)
+    password = models.CharField(max_length=50)
+    billing_account = models.CharField(max_length=50, null=True, blank=True)
 
     @property
     def carrier_name(self) -> str:
-        return 'dicom'
+        return "dicom"
 
 
 SETTINGS = DicomSettings
```

## karrio/server/providers/migrations/0035_alter_carrier_capabilities.py

```diff
@@ -5,25 +5,24 @@
 import karrio.server.providers.models.carrier
 
 
 def forwards_func(apps, schema_editor):
     db_alias = schema_editor.connection.alias
     Carrier = apps.get_model("providers", "Carrier")
 
-    for carrier in Carrier.objects.using(db_alias).all():
+    for carrier in Carrier.objects.using(db_alias).all().iterator():
         carrier.capabilities = list(set([*carrier.capabilities, "paperless"]))
         carrier.save()
 
 
 def reverse_func(apps, schema_editor):
     pass
 
 
 class Migration(migrations.Migration):
-
     dependencies = [
         ("providers", "0034_amazonmwssettings_dpdhlsettings"),
     ]
 
     operations = [
         migrations.AlterField(
             model_name="carrier",
```

## karrio/server/providers/migrations/0044_carrier_carrier_capabilities.py

```diff
@@ -11,15 +11,15 @@
 def forwards_func(apps, schema_editor):
     import karrio.server.providers.models as providers
 
     db_alias = schema_editor.connection.alias
     Carrier = apps.get_model("providers", "Carrier")
     _carriers = []
 
-    for _carrier in Carrier.objects.using(db_alias).all():
+    for _carrier in Carrier.objects.using(db_alias).all().iterator():
         carrier = providers.Carrier.objects.get(id=_carrier.id)
         raw_capabilities = ref.get_carrier_capabilities(carrier.ext)
         _carrier.carrier_capabilities = [
             c for c in lib.to_dict(carrier.capabilities) if c in raw_capabilities
         ]
         _carriers.append(_carrier)
 
@@ -28,15 +28,14 @@
 
 
 def reverse_func(apps, schema_editor):
     pass
 
 
 class Migration(migrations.Migration):
-
     dependencies = [
         ("providers", "0043_alter_genericsettings_account_number_and_more"),
     ]
 
     operations = [
         migrations.AddField(
             model_name="carrier",
```

## karrio/server/providers/migrations/0048_servicelevel_min_weight_servicelevel_transit_days_and_more.py

```diff
@@ -5,15 +5,15 @@
 import karrio.server.core.models
 
 
 def forwards_func(apps, schema_editor):
     db_alias = schema_editor.connection.alias
     ServiceLevel = apps.get_model("providers", "ServiceLevel")
 
-    for _service in ServiceLevel.objects.using(db_alias).all():
+    for _service in ServiceLevel.objects.using(db_alias).all().iterator():
         _service.zones = [dict(rate=_service.cost)]
         _service.transit_days = _service.estimated_transit_days
 
         _service.save()
 
 
 def reverse_func(apps, schema_editor):
```

## karrio/server/providers/models/__init__.py

```diff
@@ -1,15 +1,17 @@
 import typing
 import pkgutil
 import logging
 
 import karrio
 from karrio.server.core.models.base import register_model
+from karrio.server.providers.models.carrier import Carrier
+from karrio.server.providers.models.config import CarrierConfig
+from karrio.server.providers.models.service import ServiceLevel
 from karrio.server.providers.models.template import LabelTemplate
-from karrio.server.providers.models.carrier import Carrier, ServiceLevel
 import karrio.server.providers.extension.models as extensions
 
 logger = logging.getLogger(__name__)
 
 
 # Register karrio settings defined above
 MODELS: typing.Dict[str, typing.Any] = {}
```

## karrio/server/providers/models/carrier.py

```diff
@@ -1,81 +1,113 @@
-from functools import partial
-from typing import Dict
-
-from django.db import models
-from django.conf import settings
-from django.forms.models import model_to_dict
-from django.core.validators import RegexValidator
+import typing
+import functools
+import django.conf as conf
+import django.forms as forms
+import django.db.models as models
+import django.core.validators as validators
 
 import karrio
-import karrio.core.units as units
 import karrio.core.utils as utils
+import karrio.core.units as units
 import karrio.api.gateway as gateway
 import karrio.server.core.models as core
 import karrio.server.core.fields as fields
 import karrio.server.core.datatypes as datatypes
 
 
 COUNTRIES = [(c.name, c.name) for c in units.Country]
 CURRENCIES = [(c.name, c.name) for c in units.Currency]
 WEIGHT_UNITS = [(c.name, c.name) for c in units.WeightUnit]
 DIMENSION_UNITS = [(c.name, c.name) for c in units.DimensionUnit]
 CAPABILITIES_CHOICES = [(c, c) for c in units.CarrierCapabilities.get_capabilities()]
 
 
-class CarrierManager(models.Manager):
+class Manager(models.Manager):
     def get_queryset(self):
         from karrio.server.providers.models import MODELS
 
         return (
             super()
             .get_queryset()
-            .prefetch_related(*[Model.__name__.lower() for Model in MODELS.values()])
+            .prefetch_related(
+                "configs",
+                *[Model.__name__.lower() for Model in MODELS.values()],
+            )
         )
 
+        return queryset.filter(is_system=False)
+
+
+class CarrierManager(Manager):
+    def get_queryset(self):
+        return super().get_queryset().filter(is_system=False)
+
+
+class SystemCarrierManager(models.Manager):
+    def get_queryset(self):
+        return super().get_queryset().filter(is_system=True)
+
 
 class Carrier(core.OwnedEntity):
     class Meta:
         ordering = ["test_mode", "-created_at"]
 
     id = models.CharField(
         max_length=50,
         primary_key=True,
-        default=partial(core.uuid, prefix="car_"),
+        default=functools.partial(core.uuid, prefix="car_"),
         editable=False,
     )
     carrier_id = models.CharField(
         max_length=200,
-        help_text="eg. canadapost, dhl_express, fedex, purolator_courrier, ups...",
         db_index=True,
+        help_text="eg. canadapost, dhl_express, fedex, purolator_courrier, ups...",
     )
     test_mode = models.BooleanField(
-        default=True, db_column="test_mode", help_text="Toggle carrier connection mode"
+        default=True,
+        db_column="test_mode",
+        help_text="Toggle carrier connection mode",
     )
     active = models.BooleanField(
-        default=True, help_text="Disable/Hide carrier from clients", db_index=True
+        default=True,
+        db_index=True,
+        help_text="Disable/Hide carrier from clients",
+    )
+    is_system = models.BooleanField(
+        default=False,
+        db_index=True,
+        help_text="Determine that the carrier connection is available system wide.",
     )
     created_by = models.ForeignKey(
-        settings.AUTH_USER_MODEL,
+        conf.settings.AUTH_USER_MODEL,
         blank=True,
         null=True,
         on_delete=models.CASCADE,
         editable=False,
     )
     active_users = models.ManyToManyField(
-        settings.AUTH_USER_MODEL, blank=True, related_name="active_users"
+        conf.settings.AUTH_USER_MODEL,
+        blank=True,
+        related_name="active_users",
     )
     capabilities = fields.MultiChoiceField(
-        choices=CAPABILITIES_CHOICES,
+        choices=datatypes.CAPABILITIES_CHOICES,
         default=core.field_default([]),
         help_text="Select the capabilities of the carrier that you want to enable",
     )
-    metadata = models.JSONField(blank=True, null=True, default=dict)
+    metadata = models.JSONField(
+        blank=True,
+        null=True,
+        default=core.field_default({}),
+        help_text="User defined metadata",
+    )
 
-    objects = CarrierManager()
+    objects = Manager()
+    user_carriers = CarrierManager()
+    system_carriers = SystemCarrierManager()
 
     def __str__(self):
         return self.carrier_id
 
     @property
     def object_type(self):
         return "carrier"
@@ -105,31 +137,31 @@
         _tracer = getattr(_context, "tracer", utils.Tracer())
         _carrier_name = self.ext
 
         return karrio.gateway[_carrier_name].create({**self.data.to_dict()}, _tracer)
 
     @property
     def data(self) -> datatypes.CarrierSettings:
-        _computed_data: Dict = dict(
+        _computed_data: typing.Dict = dict(
             id=self.settings.id,
             carrier_name=self.settings.carrier_name,
             display_name=self.settings.carrier_display_name,
         )
 
         if hasattr(self.settings, "services"):
             _computed_data.update(
-                services=[model_to_dict(s) for s in self.settings.services.all()]
+                services=[forms.model_to_dict(s) for s in self.settings.services.all()]
             )
 
         if hasattr(self.settings, "cache"):
             _computed_data.update(cache=self.settings.cache)
 
         return datatypes.CarrierSettings.create(
             {
-                **model_to_dict(self.settings),
+                **forms.model_to_dict(self.settings),
                 **_computed_data,
             }
         )
 
     @staticmethod
     def resolve_settings(carrier):
         from karrio.server.providers.models import MODELS
@@ -150,58 +182,44 @@
 
         import karrio.references as references
 
         return references.collect_references()["carriers"].get(
             self.settings.carrier_name
         )
 
+    @property
+    def config(self):
+        carrier = self.__class__.resolve_config(self)
 
-@core.register_model
-class ServiceLevel(core.OwnedEntity):
-    class Meta:
-        db_table = "service-level"
-        verbose_name = "Service Level"
-        verbose_name_plural = "Service Levels"
-        ordering = ["-created_at"]
-
-    id = models.CharField(
-        max_length=50,
-        primary_key=True,
-        default=partial(core.uuid, prefix="svc_"),
-        editable=False,
-    )
-    service_name = models.CharField(max_length=50)
-    service_code = models.CharField(
-        max_length=50, validators=[RegexValidator(r"^[a-z0-9_]+$")]
-    )
-    description = models.CharField(max_length=250, null=True, blank=True)
-    active = models.BooleanField(null=True, default=True)
-
-    currency = models.CharField(max_length=4, choices=CURRENCIES, null=True, blank=True)
-
-    transit_days = models.IntegerField(blank=True, null=True)
-    transit_time = models.FloatField(blank=True, null=True)
-
-    max_width = models.FloatField(blank=True, null=True)
-    max_height = models.FloatField(blank=True, null=True)
-    max_length = models.FloatField(blank=True, null=True)
-    dimension_unit = models.CharField(
-        max_length=2, choices=DIMENSION_UNITS, null=True, blank=True
-    )
-
-    min_weight = models.FloatField(blank=True, null=True)
-    max_weight = models.FloatField(blank=True, null=True)
-    weight_unit = models.CharField(
-        max_length=2, choices=WEIGHT_UNITS, null=True, blank=True
-    )
-
-    domicile = models.BooleanField(null=True)
-    international = models.BooleanField(null=True)
+        return getattr(carrier, "config", None)
 
-    zones = models.JSONField(blank=True, null=True, default=core.field_default([]))
+    @staticmethod
+    def resolve_config(carrier, context=None):
+        """Resolve the config for a carrier.
+        Here are the rules:
+        - If the carrier is a system carrier, return the first config with no org
+        - If the carrier is an org carrier, return the first config from the org
+        - If the carrier is a user carrier, return the first config from the user
+        """
+        from karrio.server.providers.models.config import CarrierConfig
+        from karrio.server import serializers
+
+        if carrier.id is None:
+            return None
+
+        ctx = context or serializers.get_object_context(carrier)
+
+        queryset = (
+            CarrierConfig.objects.filter(carrier=carrier)
+            if carrier.is_system
+            else CarrierConfig.access_by(ctx).filter(carrier=carrier)
+        )
+
+        if carrier.is_system:
+            return queryset.filter(
+                **{**({"org__isnull": True} if hasattr(carrier, "org") else {})}
+            ).first()
 
-    def __str__(self):
-        return f"{self.id} | {self.service_name}"
+        if hasattr(carrier, "org") and ctx.org is not None:
+            return queryset.filter(org=ctx.org).first()
 
-    @property
-    def object_type(self):
-        return "service_level"
+        return queryset.filter(created_by=ctx.user).first()
```

## karrio/server/providers/models/template.py

```diff
@@ -1,34 +1,37 @@
-from functools import partial
-from django.db import models
-from django.core.validators import RegexValidator
+import functools
+import django.db.models as models
+import django.core.validators as validators
+import karrio.server.core.models as core
 
-from karrio.server.core.models import OwnedEntity, uuid, register_model
 
 LABEL_TEMPLATE_TYPES = [
     ("SVG", "SVG"),
     ("ZPL", "ZPL"),
 ]
 
 
-@register_model
-class LabelTemplate(OwnedEntity):
+@core.register_model
+class LabelTemplate(core.OwnedEntity):
     class Meta:
         db_table = "label-template"
         verbose_name = "Label Template"
         verbose_name_plural = "Label Templates"
         ordering = ["-created_at"]
 
     id = models.CharField(
         max_length=50,
         primary_key=True,
-        default=partial(uuid, prefix="tpl_"),
+        default=functools.partial(core.uuid, prefix="tpl_"),
         editable=False,
     )
-    slug = models.SlugField(max_length=30, validators=[RegexValidator(r"^[a-z0-9_]+$")])
+    slug = models.SlugField(
+        max_length=30,
+        validators=[validators.RegexValidator(r"^[a-z0-9_]+$")],
+    )
     template = models.TextField()
     template_type = models.CharField(max_length=3, choices=LABEL_TEMPLATE_TYPES)
     width = models.IntegerField(null=True, blank=True)
     height = models.IntegerField(null=True, blank=True)
     shipment_sample = models.JSONField(blank=True, null=True, default=dict)
 
     @property
```

## karrio/server/serializers/abstract.py

```diff
@@ -230,16 +230,20 @@
         entity.link = EntityLinkModel(org=context.org, item=entity)
         links.append(entity.link)
 
     EntityLinkModel.objects.bulk_create(links)
 
 
 def get_object_context(entity) -> Context:
-    org = (
-        entity.org.first() if (hasattr(entity, "org") and entity.org.exists()) else None
+    org = lib.failsafe(
+        lambda: (
+            entity.org.first()
+            if (hasattr(entity, "org") and entity.org.exists())
+            else None
+        )
     )
 
     return Context(
         org=org,
         user=getattr(entity, "created_by", None),
         test_mode=getattr(entity, "test_mode", None),
     )
```

## Comparing `karrio.server.core-2023.3.4.dist-info/METADATA` & `karrio.server.core-2023.4.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: karrio.server.core
-Version: 2023.3.4
+Version: 2023.4
 Summary: Multi-carrier shipping API Core module
 Home-page: https://github.com/karrioapi/karrio
 Author: karrio
 Author-email: hello@karrio.io
 License: Apache-2.0
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
```

## Comparing `karrio.server.core-2023.3.4.dist-info/RECORD` & `karrio.server.core-2023.4.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,75 +1,80 @@
 karrio/server/conf.py,sha256=RvejQQD92Hd7vzzTt89FHVDHgzbWRfhkCsnnZ6klEzI,1456
 karrio/server/openapi.py,sha256=z5AIPQi8JPtxPFoo7RIsqsOG2lx_CmrCJum3e8wJAeQ,2082
 karrio/server/core/__init__.py,sha256=CxNflBwGLO7AIGWybF61j7Mk9-a3iCxSjz2nRaER6BM,140
 karrio/server/core/admin.py,sha256=2h43pTXd3NKV8-_fkUEkzkS4zqih0qBLE8q6Yj7fpEg,33
 karrio/server/core/apps.py,sha256=VKRPRoB2YY1JlEpCe2AE6k57M1qkPADfq5RYZuLjEOw,211
 karrio/server/core/authentication.py,sha256=vxUakrdRwPuo9yJzVzBdc7JY5BRHL0PdFWK4gikmxS8,9675
 karrio/server/core/context_processors.py,sha256=B80cJ_7-uviNRYyrfsCcOaUQFBf_eAgQ0hHZPtM5Olw,323
-karrio/server/core/datatypes.py,sha256=XZXs76zMbWLiFQexrrTY8Y6e-u4jsfbA_PjLj6lHMAM,7686
-karrio/server/core/dataunits.py,sha256=EdTmOiL8F1MInDom91Z0Hxa_WDyKIHMgNRhKp6RoC6w,3279
+karrio/server/core/datatypes.py,sha256=g-ESiMTodqG-So9Z9tYUC63n3lQpAXKE3OgX6Gxbtg4,8757
+karrio/server/core/dataunits.py,sha256=SZlB8tXyLsTAxrc_68qVld-J1sP7xaxNje2LYOdu048,3848
 karrio/server/core/exceptions.py,sha256=onhinUd7NUAZXpBNzs5Pz8k6HKKcYm-foIAWm-S26sI,6024
 karrio/server/core/fields.py,sha256=5i5eetbxFkIQ9uoFk8k2xPl1mXXnaVKlPV4xwlF3inY,345
-karrio/server/core/filters.py,sha256=X4AU7Rv0jWuKta06rXd8uWDJAwBRwQqIH8K3MAGKWzo,16303
-karrio/server/core/gateway.py,sha256=bBm0CqskqSk6qP0vNioybm_xmZfazUJvbycQiR6GzRc,22930
+karrio/server/core/filters.py,sha256=QDrmno34wcT0OFKf02zFcoKuVEP5dJGZYqvhZZNSHaQ,16645
+karrio/server/core/gateway.py,sha256=z5899FoduC6rJHKRWEpVjkTTBnSsQfBgig4_H13_FF4,22781
 karrio/server/core/middleware.py,sha256=euRkeIvNv3G-b_U3fKDO6po-2dbYF0LiXUYg2nyeCI0,3017
 karrio/server/core/oauth_validators.py,sha256=Wq94ncVmaRZCRvN841SdQYmgnHEBgEUVHrn9uxj5pdA,320
 karrio/server/core/permissions.py,sha256=PXZ1FTIpimfKoFyEl__Gy9TueeCjPfyefYqmQzfpsy4,1190
 karrio/server/core/renderers.py,sha256=IUEUhvvrk_CeqnmnYQgWKHiH3uQhNc0eqDxyO9CuUS4,290
 karrio/server/core/router.py,sha256=IBUR7rfBkdEHQzWxYOPcVSM8NBp3fte9G6Q5BVTUNNw,95
-karrio/server/core/serializers.py,sha256=qGc6S08jBKn23FDtMB_uD2GRk4ZQRjWpN9Aqtq8YZhw,50018
+karrio/server/core/serializers.py,sha256=rXwH_3zBD2SIUmbaBDsf3LFgyucbZpOvVhpgoOls7og,52295
 karrio/server/core/signals.py,sha256=mM3S7ASCkaZkq92YSJsSRP_dvhIXwf2iWsE8XGQ04us,953
 karrio/server/core/tests.py,sha256=MkWFhUX5TvvbK2RNnM2gEK-NQssPvMff5hCbJpPfxoI,1848
 karrio/server/core/urls.py,sha256=JQrN6dI7A7c_M498EcDKdjDqlp_d64Ov-RS4HHmssRk,337
 karrio/server/core/utils.py,sha256=qDSkLACcdbA8zlw4ieKoaOzngjEq7o8wNXlSyfk5UC8,8963
 karrio/server/core/validators.py,sha256=7_Cm9sMsYQlZRMKgJI-eu4Ba7MTrS4DcKUW0CTxrgm8,13158
 karrio/server/core/migrations/0001_initial.py,sha256=8c-JMkt84Z5C1Zgm2jw4NiI6tYSK4OLcB-uhxiEDN98,701
-karrio/server/core/migrations/0002_apilogindex.py,sha256=bpks_L1Bu6YD2OkRe6truRPZWmU_83FJOLkum2XLe30,2091
-karrio/server/core/migrations/0003_apilogindex_test_mode.py,sha256=JFjxVB6Ub_M8u-hLRkboWzCZ-A_0SK4UFisQRr178Yo,1829
+karrio/server/core/migrations/0002_apilogindex.py,sha256=HJLJA6jyrszBWBsq03xb69UZ4SEMrIX9Mkd3dTduOpc,2117
+karrio/server/core/migrations/0003_apilogindex_test_mode.py,sha256=-a7OpNnBe7fPOuJeKTUjsbrNBqGpWEOjT536-zJaA-A,1859
 karrio/server/core/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-karrio/server/core/models/__init__.py,sha256=otn-bzdvhqBZur9Ww_43EkXkwp27gvYfW9kmtL-vJbk,471
-karrio/server/core/models/base.py,sha256=_XAlw0yP2cUpGHDmEm1wNJarq3PcSVtRvrNNAIFvmKo,1410
+karrio/server/core/models/__init__.py,sha256=59-e_6lTHKlmUA8BHjmIctYvK9fOQ-rRKbvHUy5XVms,472
+karrio/server/core/models/base.py,sha256=L5TWDghhUs05a0xB56a3W_d1p_vMNQq1Cnz_R1jCykw,1502
 karrio/server/core/models/entity.py,sha256=skA74F0YPxoZsJliL8lqRaetjX2WzS5aLIONAwnmQ6E,630
 karrio/server/core/models/third_party.py,sha256=iNXvcq0pJN2gFu5Bu03k6FMdQNxEhzoijIhl4lc7JmU,552
 karrio/server/core/views/__init__.py,sha256=jvhomX2_aiPcfdUjq7_kzp5rOerLwScnbRNDqs751Zo,88
 karrio/server/core/views/api.py,sha256=8sJYmKvQeKJ33tRc2kFCo-0hYfuzOQLfO6nQfMHqMqc,4276
 karrio/server/core/views/metadata.py,sha256=kuSIPzifEBvRi-IqfvZEaU4jgBqqTMF0k-iI5s9xuj4,1309
-karrio/server/core/views/references.py,sha256=QRxhBfxVoV1ObWrdmj_f4fGmHL7C1nWnRHHS-U6ifk0,2270
+karrio/server/core/views/references.py,sha256=osrcvckf388RFdI2ClU9oMzR7O3_9o0RQqbONfNLbPM,2475
 karrio/server/core/views/schema.py,sha256=zBVoqjYiUk6VGHzs59sVIdrVmWWnyGJFT8-r_d9SrUk,11523
 karrio/server/filters/__init__.py,sha256=kB0k-Rzf2nYvAYy82umJ7QfRgefoI7xvsJzPR3nDuWo,74
-karrio/server/filters/abstract.py,sha256=W039h0KH0tSRP0LPWPXyEIZVHunVTBDu94BATw6OWWU,610
+karrio/server/filters/abstract.py,sha256=llajZBMFUwAifBO1rRpcx7scrUJo1rfHd8F4Dzw0n_o,739
 karrio/server/providers/__init__.py,sha256=iOEMwnlORWezdO8-2vxBIPSR37D7JGjluZ8f55vzxls,81
-karrio/server/providers/admin.py,sha256=RulmT8E1KXIyeA2m6PzRnavL0io7weJMLVG2wGyQ6Wg,6509
+karrio/server/providers/admin.py,sha256=OkusfMNaP_t4FSDgy8SqXhGkgpmGRw3WA4ZnQRlbALU,11257
 karrio/server/providers/apps.py,sha256=HncfdoMhlfj-rFd7OX_Fo8naOjqh0VpjNIsUWdgzKFo,217
 karrio/server/providers/router.py,sha256=IBUR7rfBkdEHQzWxYOPcVSM8NBp3fte9G6Q5BVTUNNw,95
 karrio/server/providers/serializers.py,sha256=4k29EnGMpCD9oohKPWA7lZQR1ysPfwr-OVSq_yNsPZQ,2611
 karrio/server/providers/signals.py,sha256=0Xo00EiLQHabiZ4odEH7cuCvQXGCCpJZ5hv3gwnG_14,897
 karrio/server/providers/tests.py,sha256=NLkDTvAQ0tDq6-kk3ZuipLpZXrk68pGCrWDeixiKQqQ,67
 karrio/server/providers/urls.py,sha256=tpLXS-ExyrfhL0fjBxBlHMFaBTuRsjeEgMijJTqpbSQ,226
-karrio/server/providers/views.py,sha256=0Z9psixX8bfqMs1Q0e4fouGtw60AWhyPlIcLbm-YU5s,5579
+karrio/server/providers/views.py,sha256=bQ979qonMqFqyhZnAIDJllm_ujvsMW9p3RPSxiWKyms,5655
 karrio/server/providers/extension/__init__.py,sha256=iOEMwnlORWezdO8-2vxBIPSR37D7JGjluZ8f55vzxls,81
 karrio/server/providers/extension/models/__init__.py,sha256=bpT73UG7mZL_JjEqMwbYx6q69jA8J5Jcoul1LcDokhA,81
 karrio/server/providers/extension/models/amazon_mws.py,sha256=Se8V4TOqAsfxdT05-4unyCMiOGJeCKhDqySS81lKFOM,752
 karrio/server/providers/extension/models/aramex.py,sha256=N4g_FH47XT4fP69iL1anbmtIq322UdIxqwIZj4jW7Xo,732
 karrio/server/providers/extension/models/australiapost.py,sha256=O3o8ktkuHZOCWWanKWNfzabndO5uLV3Vk9rQDH70MvM,560
+karrio/server/providers/extension/models/boxknight.py,sha256=0w66pFn1eXxRNGzw-jnYBwLW_ZfL13vKa6OXMqXtcrs,637
 karrio/server/providers/extension/models/canadapost.py,sha256=tDn7sVgr2WyE82-Fp3e7WotmcA_RcikdeYg6uG9nkKw,619
 karrio/server/providers/extension/models/canpar.py,sha256=tQpqJdM3bxdr_tu8-Mrcb7x2zhmp_RCaHVUY5OYK6m8,462
 karrio/server/providers/extension/models/chronopost.py,sha256=f2HUkv0jbWDRZsANLsTCnX8qSTjbqXM3GPTdQ8fkhFg,625
 karrio/server/providers/extension/models/dhl_express.py,sha256=7w4pFzc1OT1m-juvB-kJ121L8hEzYn0NI36qWzC4jLw,678
 karrio/server/providers/extension/models/dhl_poland.py,sha256=ADPIM-7QrV6hyUaW0QnXVuLUdkF4QXu_0FvU3j1Q_x4,804
 karrio/server/providers/extension/models/dhl_universal.py,sha256=QNNHiqm1iPBaSTNPn-Oc_MhZ_f5mMvLKtwzX6XLc69A,531
-karrio/server/providers/extension/models/dicom.py,sha256=hHzs144gTobU29uOAQvy2IbnblARBVDiz-c6jFRPucQ,511
+karrio/server/providers/extension/models/dicom.py,sha256=51F14KSa8FSq8Q-1XLcDKsB0KlWNU1C3lQOuUbNdfGg,531
 karrio/server/providers/extension/models/dpd.py,sha256=umP5I_CYNkVNVyEr4-A0UNaIsrCv-VJiOo5tQ1uU4kE,1102
 karrio/server/providers/extension/models/dpdhl.py,sha256=OyjokNVuXDHPe21wA0fAfiQyF1-KLrK0I-2BCUVqAoo,1144
 karrio/server/providers/extension/models/easypost.py,sha256=MR9Gh3WAQXyAm7MvVKsWzUrnyDmHx76ynVViBioSZHI,463
 karrio/server/providers/extension/models/eshipper.py,sha256=LDLtfUh6NnyrrhtThErccy8_lS3kDdephpvDvuBBRC4,512
 karrio/server/providers/extension/models/fedex.py,sha256=b-YC0QOcGtBsIIDC7Un9Cnk4ViOokikN1r4nkPNv180,685
 karrio/server/providers/extension/models/freightcom.py,sha256=ApcPj0n49-_YpagO0OZpLenx8G-EVi33ylTu28UZPaM,524
 karrio/server/providers/extension/models/generic.py,sha256=q1f4weW_wGv_G9TWm5SHyV6HyzROXQKX0vycjw08a2w,1389
+karrio/server/providers/extension/models/geodis.py,sha256=f-g2SKikVGBz4IM4X88cUrZUscx4VpmIpMZhGbhNWYk,586
+karrio/server/providers/extension/models/laposte.py,sha256=ggYy_Kj0zt8RnjoKyD4m7FzKwzAPViHvvYF7SqW2_nQ,542
+karrio/server/providers/extension/models/nationex.py,sha256=HzMgEmAh8Y27urXAdv-d01l-nuQwSrT-_tU4U00aSzk,676
 karrio/server/providers/extension/models/purolator.py,sha256=VtEXPQUwuGEEEvn9nFwsuXzZhazwwdh92rh5Pywul-E,595
+karrio/server/providers/extension/models/roadie.py,sha256=MKbFvnieM1lnIkXmMnVxoi1_LL-vZThLu9zvVdNa6tw,465
 karrio/server/providers/extension/models/royalmail.py,sha256=bsYqC54_cUbd1LNX1BruOLK6Bwj49_02vB6_MDyWhXI,488
 karrio/server/providers/extension/models/sendle.py,sha256=oLURg_dV4qgHQJhqyYcgNZBUdbvVEE1-dml4NbjItts,462
 karrio/server/providers/extension/models/sf_express.py,sha256=3uwO-KsUj5GfB6yAPGeggyT-ACC62cgEiVKgyuxPEd4,488
 karrio/server/providers/extension/models/tnt.py,sha256=7NjcVTPmti2bt6sxjGRp8D-f7Mk_7xWfNQuFWdpZBGQ,609
 karrio/server/providers/extension/models/ups.py,sha256=MJI6910Y7MPizAcy5qgRSs6TFGj9RcHIWTo4BOzUAFE,670
 karrio/server/providers/extension/models/ups_freight.py,sha256=sC76935Em92Y0Z2wWEPdu1T58NNzZJ6GpuNaheuPkTs,730
 karrio/server/providers/extension/models/usps.py,sha256=sGrG5bCi5UtI8eU6m7tLgzweX9hZXoX6CrbZtJFyYvk,699
@@ -106,34 +111,38 @@
 karrio/server/providers/migrations/0028_auto_20220323_1500.py,sha256=zDgI1vtMSeuJ-_I6y32e6wHz0p64ZIiTtwmTCD2X3lw,958
 karrio/server/providers/migrations/0029_easypostsettings.py,sha256=bqE_Q723IdsTuzgcQ4wxH_g0SEFmDjB7yEL9yaNP9p0,885
 karrio/server/providers/migrations/0030_amazonmwssettings.py,sha256=Dg7kUt_Ni4gZeZq1pTdt46CV3pOxjHjSBp0mb0YcvwA,1044
 karrio/server/providers/migrations/0031_delete_amazonmwssettings.py,sha256=MJ1TIkZuHSVmx6SBBRD1tFVy-aXhwCSXUKt1C43Sjd0,404
 karrio/server/providers/migrations/0032_alter_carrier_test.py,sha256=jq5UwyS9QiJSKJUGu4TXjA_2XqmUbiGRLiui0KVMM2A,463
 karrio/server/providers/migrations/0033_auto_20220708_1350.py,sha256=gKKLVGriUVMTIzmHsRb_n8l3QFORYMS12ybG0-Qil8k,509
 karrio/server/providers/migrations/0034_amazonmwssettings_dpdhlsettings.py,sha256=aSIZHduI_Y1--iw-j70NzEO8_-69joA4_rKgODDxEuU,2027
-karrio/server/providers/migrations/0035_alter_carrier_capabilities.py,sha256=kEHGYU78COCjdg0uZsFAhBqczP-M8EpJE8EtcLvPY3g,1366
+karrio/server/providers/migrations/0035_alter_carrier_capabilities.py,sha256=3VpeSGMhgQRbNsPblF-OZHrB5efPkRBGQoMiVSr2z8Y,1376
 karrio/server/providers/migrations/0036_upsfreightsettings.py,sha256=EAa_uqBAK39ImIveg7pyeB1_cKsISyBLen-g-jGW6Qk,4488
 karrio/server/providers/migrations/0037_chronopostsettings.py,sha256=Yu6WGjaWfbVLKRRMWJ-Uo_7JRc6NsZszlde9d6zMVOA,4358
 karrio/server/providers/migrations/0038_alter_genericsettings_label_template.py,sha256=AMsNyPkvK5tsaJ1zt_ol96kx0f4bNOB12vbDnyR7AT0,526
 karrio/server/providers/migrations/0039_auto_20220906_0612.py,sha256=xbIWpkL76mLYMih_dCnbi7ZZ0XncWZ9dUNZHjwI4ho4,639
 karrio/server/providers/migrations/0040_dpdhlsettings_services.py,sha256=1tm0Y81pdz7Gfmn25TbepZn1DdisNZqHbeJ2f9PA6hc,428
 karrio/server/providers/migrations/0041_auto_20221105_0705.py,sha256=DmB0VR2XL9bb_N8VG18xhqLtKu334CGntnEAei5aC7A,17652
 karrio/server/providers/migrations/0042_auto_20221215_1642.py,sha256=suEpu6skR8hAvf3IcWKjEER0358yfZ_aoHbmKtbdVl0,7210
 karrio/server/providers/migrations/0043_alter_genericsettings_account_number_and_more.py,sha256=Rrewrpc9QvKcoNBpCqkEKvEAuPxOBnDhhdjwSdiXtNQ,1310
-karrio/server/providers/migrations/0044_carrier_carrier_capabilities.py,sha256=osPtV4yIAzLbkgu6VCqKnHqpY8zzjdob4GvronAwSLs,2121
+karrio/server/providers/migrations/0044_carrier_carrier_capabilities.py,sha256=hxqHIAdC04CQmThccnOgemsrLun0pBvYYe7S1NnwHlU,2131
 karrio/server/providers/migrations/0045_alter_carrier_active_alter_carrier_carrier_id.py,sha256=83dpTwJA9vOdGlatfQEOFwBUl-yjfEIQdLR-2Zz5CS0,839
 karrio/server/providers/migrations/0046_remove_dpdhlsettings_signature_and_more.py,sha256=jo3PPvqBaob4mNNO8zHLXIWVv2VGPUCBzY7wgMzlYGw,1363
 karrio/server/providers/migrations/0047_dpdsettings.py,sha256=CtK5xH7HNIAIg0bDVDrVjKnSHCMlSa2QGd0nUFq3-uw,11550
-karrio/server/providers/migrations/0048_servicelevel_min_weight_servicelevel_transit_days_and_more.py,sha256=F4zkDBIA26McZKvapMdIxeV-O_4rIWy8TKjEQmoY0PU,1842
+karrio/server/providers/migrations/0048_servicelevel_min_weight_servicelevel_transit_days_and_more.py,sha256=7ZOmr2dKtt_DSk3FDQeL6rs3E1EqCqrBP0MrsTBYuAE,1853
+karrio/server/providers/migrations/0049_boxknightsettings_geodissettings_lapostesettings_and_more.py,sha256=GopONQOzP6VwAxAUxv9ylYbdOt0JUjv_Ef_sIA80oSk,5661
+karrio/server/providers/migrations/0050_carrier_is_system_alter_carrier_metadata_and_more.py,sha256=DbvtcW2AW4z9J6eq5yFsB-zDbvEihlORmcIQ4yeYcV8,3516
 karrio/server/providers/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-karrio/server/providers/models/__init__.py,sha256=-M1I8PWWUONEENwL7zKD-rhmGvlywH7tlksD0f5amlo,910
-karrio/server/providers/models/carrier.py,sha256=ziNlIQJnfH_OIB_phzevUrzW_ZrvTLuZ6GMFOH5v_YY,6426
-karrio/server/providers/models/template.py,sha256=5vxZ_bPueNtrpxAMoah3bbogSTNFOz96R3tR58rVgYc,1095
+karrio/server/providers/models/__init__.py,sha256=MjdoB1V3IhIqxESukNcrjUeHwGaw43fyzbdbwnO18LI,1024
+karrio/server/providers/models/carrier.py,sha256=Lh5bmIA0CQn24v4oEYqnmrGlwV3JZDb_e_qtVeWhon0,6753
+karrio/server/providers/models/config.py,sha256=qPn1SoPjmpttq7c1kCXVva_T5KSZRBS3muU9k1Ye7T8,760
+karrio/server/providers/models/service.py,sha256=y5LUe-7s_-J6zRcGgPqn4DAv2NdQACDb6hnxbCenrt0,2054
+karrio/server/providers/models/template.py,sha256=rrQXfimqFEFkelKzjyVeAruiu3UmrhpOT4M7JrGOtI0,1109
 karrio/server/serializers/__init__.py,sha256=TzD3Lt8Gf7VV5ibGITGg5-ki-M8CR0hzZFulcI2ASJM,90
-karrio/server/serializers/abstract.py,sha256=sSD-SnuaZ771VftAhafBP3-rBkaPdpBAw0Odsq8hfe0,12154
+karrio/server/serializers/abstract.py,sha256=cuu5uzssVt-T3SEj7hmO08M9hZ_W9wL09bj_1kWUJ_o,12222
 karrio/server/tracing/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 karrio/server/tracing/admin.py,sha256=6BZCJiBhJVg3vt8cYx9HF_FgcjanMD42la6bBORlSL8,1904
 karrio/server/tracing/apps.py,sha256=6BfIomUwBV8k7yaypl6kYYAkLSG1aceUmuxvbhw04fI,247
 karrio/server/tracing/models.py,sha256=FPBTDdzC_gc_YMdZ9TV0suS8HhSW6FaOmZYy4ixBFFs,2056
 karrio/server/tracing/tests.py,sha256=mrbGGRNg5jwbTJtWWa7zSKdDyeB4vmgZCRc2nk6VY-g,60
 karrio/server/tracing/utils.py,sha256=Jm3bBRQO6eLZHI0Di-xKEaAfJGcfAn-PR1vcEtYZtUI,2868
 karrio/server/tracing/migrations/0001_initial.py,sha256=lgXoZrk4x3EQ1pVoRT2r7LnhEMvqOdeqIDwZwyFq_cE,1921
@@ -155,11 +164,11 @@
 karrio/server/user/migrations/0002_token.py,sha256=lKgbPy036dZYBmvtdg1Ta1mH1PkMLoJZtHkyRbdjEO0,992
 karrio/server/user/migrations/0003_token_test_mode.py,sha256=YEqSXx6FDysbTqAuZmwH1NQTlzMnvvmphacVk8hyrL0,498
 karrio/server/user/migrations/0004_group.py,sha256=ki5yjRYDwgNk-Wmy8slb_PvPJmFAOrXf9k7o3rm4JZw,791
 karrio/server/user/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 karrio/server/user/templates/registration/login.html,sha256=3_tj-0rKfwkCk-fp_GT8xFQhLqjGcJs3uZzOAaI40Sw,3690
 karrio/server/user/templates/registration/registration_confirm_email.html,sha256=zFDkNN_BHMQyrBv_mU8aoqXxYxG91TGuf6pKwRa5jxE,247
 karrio/server/user/templates/registration/registration_confirm_email.txt,sha256=I_zN_pJTRigfyiYbyQK0wFfrI5Zq1JG8lf0TyLA9fN0,94
-karrio.server.core-2023.3.4.dist-info/METADATA,sha256=Kf8igycgfP93zmKyRdtyy1IPXdv2UwNk3ul8L-605nk,773
-karrio.server.core-2023.3.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-karrio.server.core-2023.3.4.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
-karrio.server.core-2023.3.4.dist-info/RECORD,,
+karrio.server.core-2023.4.dist-info/METADATA,sha256=50HGnZUvmXn3LKkMY2YJM4dkqMIcDDGnL9whh9j7GRc,771
+karrio.server.core-2023.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+karrio.server.core-2023.4.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
+karrio.server.core-2023.4.dist-info/RECORD,,
```

